(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-30b70f28"],{"084c":function(e,t,o){"use strict";o.d(t,"d",(function(){return a})),o.d(t,"c",(function(){return n})),o.d(t,"a",(function(){return r})),o.d(t,"b",(function(){return s})),o.d(t,"e",(function(){return l}));o("d9e2");function i(e){var t=e.url,o=void 0===t?"":t,i=e.method,a=void 0===i?"GET":i;if(!o)throw new Error("url must be not null");if("GET"!==a.toUpperCase()&&"POST"!==a.toUpperCase())throw new Error('Illegal request method, Methods can only be "GET" or "POST"');return!0}function a(e){var t=e.url,o=void 0===t?"":t,a=e.method,n=void 0===a?"GET":a,r=e.data,s=e.beforeRequest,l=e.afterRequest;if(i({url:o,method:n}))return this["$".concat(n.toLowerCase())]({url:o,data:r,beforeRequest:s,afterRequest:l});throw new Error("params check failed")}function n(e){var t=e.url,o=void 0===t?"":t,a=e.method,n=void 0===a?"GET":a,r=e.data,s=e.beforeRequest,l=e.afterRequest;if(i({url:o,method:n}))return this["$".concat(n.toLowerCase())]({url:o,data:r,beforeRequest:s,afterRequest:l});throw new Error("params check failed")}function r(e){var t=e.url,o=void 0===t?"":t,a=e.method,n=void 0===a?"GET":a,r=e.data,s=e.beforeRequest,l=e.afterRequest;if(i({url:o,method:n}))return this["$".concat(n.toLowerCase())]({url:o,data:r,beforeRequest:s,afterRequest:l});throw new Error("params check failed")}function s(e){var t=e.url,o=void 0===t?"":t,a=e.method,n=void 0===a?"GET":a,r=e.data,s=e.beforeRequest,l=e.afterRequest;if(i({url:o,method:n}))return this["$".concat(n.toLowerCase())]({url:o,data:r,beforeRequest:s,afterRequest:l});throw new Error("params check failed")}function l(e){var t=e.url,o=void 0===t?"":t,a=e.method,n=void 0===a?"GET":a,r=e.data,s=e.beforeRequest,l=e.afterRequest;if(i({url:o,method:n}))return this["$".concat(n.toLowerCase())]({url:o,data:r,beforeRequest:s,afterRequest:l});throw new Error("params check failed")}},"0a5e":function(e,t,o){"use strict";o.d(t,"a",(function(){return r}));var i=o("5530"),a=o("3c24"),n={setTotalSize:function(e){this.pageModel.totalSize=e}},r={mixins:[a["d"]],data:function(){return{pageModel:{currentPage:1,pageSize:10,totalSize:0}}},methods:{pageSizeChanged:function(e){this.pageModel.pageSize=e,this.pageModel.currentPage=1,this.publishEvent("pageChanged",this.pageModel)},currentChanged:function(e){this.pageModel.currentPage=e,this.publishEvent("pageChanged",this.pageModel)},withPageInfoData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i["a"])(Object(i["a"])({},e),{},{page:this.pageModel.currentPage,pageSize:this.pageModel.pageSize})}},created:function(){this.registeEvent(n)}},s={pageChanged:function(){this.doRefresh()}};t["b"]={data:function(){return{dataList:[],tableConfig:{size:"small",headerCellStyle:{backgroundColor:"rgb(255, 255, 255)","text-align":"left","font-weight":"bold","font-size":"18px","font-family":"等线",color:"#151515"},cellStyle:{"text-align":"left","font-size":"18px","font-family":"等线"},height:"100%"},tableLoading:!1}},mounted:function(){var e=this;this.$on("tableHeightChanged",(function(t){e.tableConfig.height=e.$refs.tableBody?e.$refs.tableBody.$el.offsetHeight-10-2:"100%",e.$refs.table&&e.$refs.table.doLayout()}))},methods:{handleSuccess:function(e){var t=e.data,o=void 0===t?[]:t,i=e.totalSize,a=void 0===i?10:i;this.publishEvent("setTotalSize",a),this.dataList=o}},created:function(){this.registeEvent(s)}}},"3c24":function(e,t,o){"use strict";o.d(t,"c",(function(){return d})),o.d(t,"b",(function(){return m})),o.d(t,"e",(function(){return u})),o.d(t,"a",(function(){return c})),o.d(t,"d",(function(){return f}));o("5530"),o("d9e2"),o("d3b7"),o("159b"),o("13d5"),o("b0c0");var i=o("084c"),a=o("fa7d");function n(e,t){e.onResult&&e.onResult(t),e.afterAction&&e.afterAction(t)}function r(e,t){e.onError&&e.onError(t),e.afterAction&&e.afterAction(t)}function s(e){return Object(a["c"])(e.params)?e.params():!!Object(a["d"])(e.params)&&e.params}var l={data:function(){return{selectedItems:[]}},methods:{handleSelectionChange:function(e){this.selectedItems=e}}},d={data:function(){return{getDataModel:{init:!1}}},methods:{initGetData:function(e){var t=e.url,o=e.method,i=e.params,a=e.beforeAction,n=e.onResult,r=e.onError,s=e.afterAction;if(!t)throw new Error("please init url");return this.getDataModel.url=t,this.getDataModel.method=o,this.getDataModel.onResult=n,this.getDataModel.onError=r,this.getDataModel.params=i||{},this.getDataModel.beforeAction=a,this.getDataModel.afterAction=s,this.getDataModel.init=!0,Promise.resolve(this.getDataModel.init)},getData:function(){var e=this,t=s(this.getDataModel);if(!t)throw new Error("please set get param");this.getDataModel.beforeAction&&this.getDataModel.beforeAction(),i["d"].call(this,{url:this.getDataModel.url,method:this.getDataModel.method||"post",data:t}).then((function(t){n.call(e,e.getDataModel,t)})).catch((function(t){r.call(e,e.getDataModel,t)}))}}},m={mixins:[l],data:function(){return{deleteItemsModel:{init:!1}}},methods:{initDeleteItem:function(e){var t=e.url,o=e.method,i=e.params,a=e.multiParams,n=e.onDeleteItem,r=e.onDeleteMultiItem,s=e.beforeAction,l=e.onResult,d=e.onError,m=e.afterAction;if(!t)throw new Error("please init url");this.deleteItemsModel.url=t,this.deleteItemsModel.method=o,this.deleteItemsModel.onResult=l,this.deleteItemsModel.onError=d,this.deleteItemsModel.beforeAction=s,this.deleteItemsModel.afterAction=m,this.deleteItemsModel.params=i,this.deleteItemsModel.multiParams=a,this.deleteItemsModel.onDeleteItem=n,this.deleteItemsModel.onDeleteMultiItem=r,this.deleteItemsModel.init=!0},onDeleteItem:function(e){if(!this.deleteItemsModel.onDeleteItem)throw new Error("please init onDeleteItem");if(!(this.deleteItemsModel.onDeleteItem instanceof Function))throw new Error("onDeleteItem must be Function");this.deleteItemsModel.onDeleteItem(e)},onDeleteMultiItem:function(){if(!this.deleteItemsModel.onDeleteMultiItem)throw new Error("please init onDeleteMultiItem");if(!(this.deleteItemsModel.onDeleteMultiItem instanceof Function))throw new Error("onDeleteMultiItem must be Function");this.deleteItemsModel.onDeleteMultiItem()},doDeleteItem:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"single";if(!this.deleteItemsModel.init)throw new Error("please init deleteItemsModel first");var o={};if("single"===t)o=s(this.deleteItemsModel);else{if("multi"!==t)throw new Error("only support delete single or multi");if(!this.deleteItemsModel.multiParams||!Object(a["c"])(this.deleteItemsModel.multiParams))throw new Error("please set multi params and `multiParams` must be Function type");o=this.deleteItemsModel.multiParams(this.selectedItems)}if(!o)throw new Error("please set delete param");i["b"].call(this,{url:this.deleteItemsModel.url,method:this.deleteItemsModel.method||"post",data:o}).then((function(t){n.call(e,e.deleteItemsModel,t)})).catch((function(t){r.call(e,e.deleteItemsModel,t)}))}}},u={data:function(){return{updateItemModel:{init:!1}}},methods:{initUpdateItem:function(e){var t=e.url,o=e.method,i=e.params,a=e.onUpdateItem,n=e.beforeAction,r=e.onResult,s=e.onError,l=e.afterAction;if(!t)throw new Error("please init url");this.updateItemModel.url=t,this.updateItemModel.method=o,this.updateItemModel.params=i,this.updateItemModel.onResult=r,this.updateItemModel.onError=s,this.updateItemModel.beforeAction=n,this.updateItemModel.afterAction=l,this.updateItemModel.onUpdateItem=a,this.updateItemModel.init=!0},onUpdateItem:function(e){if(!this.updateItemModel.onUpdateItem)throw new Error("please init onUpdateItem");if(!(this.updateItemModel.onUpdateItem instanceof Function))throw new Error("onUpdateItem must be Function");this.updateItemModel.onUpdateItem(e)},doUpdateItem:function(){var e=this;if(!this.updateItemModel.init)throw new Error("please init updateItemModel first");var t=s(this.updateItemModel);if(!t)throw new Error("please set update param");i["e"].call(this,{url:this.updateItemModel.url,method:this.updateItemModel.method||"post",data:t}).then((function(t){n.call(e,e.updateItemModel,t)})).catch((function(t){r.call(e,e.updateItemModel,t)}))}}},c={data:function(){return{addItemModel:{init:!1}}},methods:{initAddItem:function(e){var t=e.url,o=e.method,i=e.params,a=e.onAddItem,n=e.beforeAction,r=e.onResult,s=e.onError,l=e.afterAction;if(!t)throw new Error("please init url");this.addItemModel.url=t,this.addItemModel.method=o,this.addItemModel.params=i,this.addItemModel.onResult=r,this.addItemModel.onError=s,this.addItemModel.beforeAction=n,this.addItemModel.afterAction=l,this.addItemModel.onAddItem=a,this.addItemModel.init=!0},onAddItem:function(){if(!this.addItemModel.onAddItem)throw new Error("please init onAddItem");if(!(this.addItemModel.onAddItem instanceof Function))throw new Error("onAddItem must be Function");this.addItemModel.onAddItem()},doAddItem:function(){var e=this;if(!this.addItemModel.init)throw new Error("please init addItemModel first");var t=s(this.addItemModel);if(!t)throw new Error("please set add param");i["a"].call(this,{url:this.addItemModel.url,method:this.addItemModel.method||"post",data:t}).then((function(t){n.call(e,e.addItemModel,t)})).catch((function(t){r.call(e,e.addItemModel,t)}))}}},f={methods:{doRefresh:function(){if(this.isInited("likeSearchModel"))this.hasSearchParams()?this.doSearch():this.getData();else{if(!this.isInited("getDataModel"))throw new Error("can`t exec doRefresh function");this.getData()}}}}},"53ca":function(e,t,o){"use strict";o.d(t,"a",(function(){return i}));o("a4d3"),o("e01a"),o("d3b7"),o("d28b"),o("3ca3"),o("ddb0");function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}},"7e36":function(e,t,o){"use strict";o.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"main-container"},[t("TableHeader",{attrs:{"can-collapsed":!1}},[t("template",{slot:"left"},[t("el-button",{attrs:{size:"mini",icon:"el-icon-back"},on:{click:e.onFile}},[e._v("返回")])],1),t("template",{slot:"right"},[t("el-popover",{attrs:{placement:"top",width:"350"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[t("p",[e._v("通过ID添加协作者")]),t("el-input",{staticStyle:{width:"80%",margin:"auto"},attrs:{placeholder:"输入ID"},model:{value:e.form_invite.accept_id,callback:function(t){e.$set(e.form_invite,"accept_id",t)},expression:"form_invite.accept_id"}}),t("p"),t("el-select",{attrs:{placeholder:"请选择权限"},model:{value:e.form_invite.power,callback:function(t){e.$set(e.form_invite,"power",t)},expression:"form_invite.power"}},e._l(e.powerOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),t("div",{staticStyle:{"text-align":"left",margin:"0"}},[t("el-button",{staticStyle:{"margin-top":"10px"},attrs:{size:"mini"},on:{click:function(t){e.invite(),e.visible=!1}}},[e._v("确定")])],1),t("el-button",{staticStyle:{"margin-right":"10px"},attrs:{slot:"reference",size:"mini",icon:"el-icon-plus"},slot:"reference"},[e._v("添加成员 ")])],1),e.isInited("deleteItemsModel")?t("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:e.deleteMultiItem}},[e._v("删除成员 ")]):e._e()],1)],2),t("TableBody",{ref:"tableBody"},[[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",attrs:{data:e.memberList,"header-cell-style":e.tableConfig.headerCellStyle,size:e.tableConfig.size,stripe:e.tableConfig.stripe,border:e.tableConfig.border},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"45"}}),t("el-table-column",{attrs:{align:"center",label:"序号",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.$index+1)+" ")]}}])}),t("el-table-column",{attrs:{align:"center",label:"ID",prop:"id",width:"100px"}}),t("el-table-column",{attrs:{align:"center",label:"用户名",prop:"username",width:"240px"}}),t("el-table-column",{attrs:{align:"center",label:"邮箱",prop:"email",width:"320px"}}),t("el-table-column",{attrs:{align:"center",label:"权限",prop:"power",width:"100px"}}),t("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("el-popover",{attrs:{placement:"bottom",width:"350"}},[t("p",[e._v("更改成员权限")]),t("el-select",{attrs:{placeholder:"请选择权限"},model:{value:e.form_setPerm.perm,callback:function(t){e.$set(e.form_setPerm,"perm",t)},expression:"form_setPerm.perm"}},e._l(e.powerOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),t("div",{staticStyle:{"text-align":"left",margin:"0"}},[t("el-button",{staticStyle:{"margin-top":"10px"},attrs:{size:"mini"},on:{click:function(t){return e.setPerm(o.row)}}},[e._v("确定")])],1),t("el-button",{staticStyle:{"margin-inline":"10px"},attrs:{slot:"reference",size:"mini"},slot:"reference"},[e._v("更改成员权限")])],1),t("el-button",{attrs:{size:"mini",type:"danger",underline:!1},on:{click:function(t){return e.deleteItem(o.row)}}},[e._v("删除")])]}}])})],1)]],2)],1)},a=[],n=(o("a9e3"),o("0a5e")),r=o("3c24"),s=o("f385"),l=o("46da"),d=o("a991"),m=o("8159"),u=o("4328"),c=o.n(u),f=o("0f9a"),h={name:"TableGroupMember",components:{SingleUpload:s["default"],BaseForm:l["default"]},directives:{draggable:d["a"]},mixins:[n["b"],n["a"],r["c"],r["a"],r["b"],r["e"],r["d"]],data:function(){return{visible_setPerm:!0,loading:!1,form_member:{token:f["getters"].getToken(f["state"]),username:f["getters"].getUserName(f["state"]),user_id:f["getters"].getUserId(f["state"]),team_id:Number(localStorage.getItem("team_id"))},visible:!1,form_invite:{token:f["getters"].getToken(f["state"]),username:f["getters"].getUserName(f["state"]),send_id:f["getters"].getUserId(f["state"]),accept_id:null,team_id:Number(localStorage.getItem("team_id")),power:null},form_deleteMember:{token:f["getters"].getToken(f["state"]),username:f["getters"].getUserName(f["state"]),user_id:f["getters"].getUserId(f["state"]),team_id:Number(localStorage.getItem("team_id")),deleted_id:null},form_quitTeam:{token:f["getters"].getToken(f["state"]),username:f["getters"].getUserName(f["state"]),user_id:f["getters"].getUserId(f["state"]),team_id:Number(localStorage.getItem("team_id"))},form_setPerm:{token:f["getters"].getToken(f["state"]),username:f["getters"].getUserName(f["state"]),user_id:f["getters"].getUserId(f["state"]),team_id:Number(localStorage.getItem("team_id")),member_id:0,perm:null},memberList:[],deleteMemberList:[],powerOptions:[{value:1,label:"队长"},{value:2,label:"开发者"},{value:3,label:"观察者"}],userModel:{address:"",avatar:"",gender:1,id:1,lastLoginIp:"",lastLoginTime:"",nickName:"",status:0,vip:1}}},created:function(){this.getMemberList()},methods:{setPerm:function(e){var t=this;this.form_setPerm.member_id=e.id,this.$axios.post("/team/set_perm",c.a.stringify(this.form_setPerm)).then((function(e){7===e.data.result?t.$message.success(e.data.message):t.$message.error(e.data.message),t.getMemberList()}))},deleteItem:function(e){var t=this;e.id===this.form_deleteMember.user_id?this.$confirm("此操作将使您退出此团队, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.quitTeam()})).catch((function(){t.$message({type:"info",message:"已取消操作"})})):this.$confirm("此操作将踢出用户成员"+e.username+", 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.deleteMember(e)})).catch((function(){t.$message({type:"info",message:"已取消操作"})}))},handleSelectionChange:function(e){this.deleteMemberList=e},deleteMultiItem:function(){var e=this;this.$confirm("此操作将踢出您选中的所有成员, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){for(var t=0;t<e.deleteMemberList.length;t++)e.deleteMember(e.deleteMemberList[t]);e.getMemberList()})).catch((function(){e.$message({type:"info",message:"已取消踢出"})}))},deleteMember:function(e){var t=this;this.form_deleteMember.deleted_id=e.id,this.$axios.post("/team/delete_member",c.a.stringify(this.form_deleteMember)).then((function(e){5===e.data.result?t.$message.success(e.data.message):t.$message.error(e.data.message),t.getMemberList()}))},quitTeam:function(){var e=this;this.$axios.post("/team/quit_team",c.a.stringify(this.form_quitTeam)).then((function(t){5===t.data.result?e.$message.success(t.data.message):e.$message.error(t.data.message),e.onGroupSpace()}))},onGroupSpace:function(){m["a"].toGroupSpace&&m["a"].toGroupSpace()},clearList:function(){this.memberList=[]},onFile:function(){this.$router.push("/list/table-group-file")},getMemberList:function(){var e=this;this.loading=!0,this.clearList(),this.$axios.post("/team/get_team_member_list",c.a.stringify(this.form_member)).then((function(t){if(4===t.data.result)for(var o=0;o<t.data.team_member_list.length;o++){var i={sno:0,id:0,username:"",email:"",power:""};i.sno=o+1,i.id=t.data.team_member_list[o].id,i.username=t.data.team_member_list[o].username,i.email=t.data.team_member_list[o].email,1===t.data.team_member_list[o].power?i.power="队长":2===t.data.team_member_list[o].power?i.power="开发者":3===t.data.team_member_list[o].power&&(i.power="观察者");for(var a=0,n=0;n<e.memberList.length;n++)if(e.memberList[n].id===i.id){a=1;break}a||e.memberList.push(i)}else e.$message.error(t.data.message);e.loading=!1}))},invite:function(){var e=this;this.$axios.post("/team/invite_member",c.a.stringify(this.form_invite)).then((function(t){6===t.data.result?e.$message.success(t.data.message):e.$message.error(t.data.message)}))},onRichTextEditor:function(){m["a"].toRichTextEditor&&m["a"].toRichTextEditor()},onChooseTemplate:function(){m["a"].toChooseTemplate&&m["a"].toChooseTemplate()},onSingleSuccess:function(e){var t=e.res;200!==t.status?this.$errorMsg(t.msg):this.userModel=t.obj},beforeUpload:function(e){var t=e.size;if(t/1024>500)return this.$errorMsg("上传文件最大不能超过500K"),!1}}},p=h,g=o("2877"),b=Object(g["a"])(p,i,a,!1,null,"98fea634",null);t["default"]=b.exports},a991:function(e,t,o){"use strict";var i=o("53ca"),a={left:0,right:0,top:0,bottom:0},n={inserted:function(e,t,o){var i=e.querySelector(".el-dialog__header");i.style.cursor="move";var n=e.querySelector(".el-dialog"),r=0,s=0,l="";i.addEventListener("mousedown",(function(e){e.preventDefault(),l="down",a.left=-(document.documentElement.clientWidth-n.clientWidth)/2,a.right=Math.abs(a.left);var t=parseInt(n.style.marginTop)/100;a.top=-document.documentElement.clientHeight*t,a.bottom=document.documentElement.clientHeight*(1-t)-n.clientHeight,r=e.clientX-parseInt(n.style.left||0),s=e.clientY-parseInt(n.style.top||0);var o=function(e){if("down"===l){var t=e.clientX,o=e.clientY,i=t-r,d=o-s;i<=a.left&&(i=a.left),i>=a.right&&(i=a.right),d<=a.top&&(d=a.top),d>=a.bottom&&(d=a.bottom),n.style.left=i+"px",n.style.top=d+"px"}},i=function e(){l="up",document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",e)};document.addEventListener("mousemove",o),document.addEventListener("mouseup",i)}))}},r=function(e){e.directive("draggable",n)};n.install=r,void 0!==("undefined"===typeof window?"undefined":Object(i["a"])(window))&&Window.vue&&r(window.Vue);t["a"]=n}}]);