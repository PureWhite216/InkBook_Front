Index: src/views/list/table-group-message.vue
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><template>\r\n  <div class=\"main-container\">\r\n    <TableHeader :can-collapsed=\"false\">\r\n      <template slot=\"left\">\r\n        <p id=\"teamName\" class=\"teamtitle\" v-text=\"team_name\">\r\n          team_name\r\n        </p>\r\n      </template>\r\n      <template slot=\"right\">\r\n        <el-popover\r\n          v-model=\"visible\"\r\n          placement=\"top\"\r\n          width=\"350\"\r\n        >\r\n          <el-button\r\n            slot=\"reference\"\r\n            class=\"button-style\"\r\n            @click=\"dialogInviteVisible = true\"\r\n          >邀请成员\r\n            <i class=\"el-icon-user\"></i>\r\n          </el-button>\r\n        </el-popover>\r\n\r\n        <el-popover\r\n          v-model=\"visible\"\r\n          placement=\"top\"\r\n          width=\"350\"\r\n          trigger=\"click\"\r\n        >\r\n          <el-button\r\n            slot=\"reference\"\r\n            class=\"button-style\"\r\n            @click=\"form_createProject.project_name = '', form_createProject.project_info = '', dialogCreateProjectVisible = true\"\r\n          >创建新项目\r\n            <i class=\"el-icon-plus\"></i>\r\n          </el-button>\r\n        </el-popover>\r\n\r\n        <el-popover\r\n          v-model=\"visible\"\r\n          placement=\"top\"\r\n          width=\"350\"\r\n        >\r\n          <el-button\r\n            slot=\"reference\"\r\n            class=\"button-style\"\r\n          ><el-dropdown trigger=\"click\" @command=\"onCommad\">\r\n            <div class=\"action-wrapper\" style=\"font-size: 16px ;font-weight: bold\">\r\n              <i class=\"el-icon-setting\"></i>\r\n              设置\r\n            </div>\r\n            <el-dropdown-menu slot=\"dropdown\">\r\n              <el-dropdown-item icon=\"el-icon-edit-outline\" command=\"personalCenter\">\r\n                <el-button type=\"text\" @click=\"dialogRenameVisible = true\">团队重命名</el-button>\r\n              </el-dropdown-item>\r\n              <el-dropdown-item icon=\"el-icon-edit-outline\" command=\"personalCenter\">\r\n                <el-button type=\"text\" @click=\"quitTeam\">退出团队</el-button>\r\n              </el-dropdown-item>\r\n              <el-dropdown-item icon=\"el-icon-switch-button\" command=\"logout\">\r\n                <el-button type=\"text\" style=\"color: red\" @click=\"deleteTeam\">删除团队</el-button>\r\n              </el-dropdown-item>\r\n            </el-dropdown-menu>\r\n          </el-dropdown>\r\n          </el-button>\r\n        </el-popover>\r\n      </template>\r\n    </TableHeader>\r\n    <el-dialog title=\"邀请成员\" :visible.sync=\"dialogInviteVisible\">\r\n      <el-form :model=\"form_invite\">\r\n        <el-form-item label=\"成员邮箱\" :label-width=\"formLabelWidth\">\r\n          <el-input v-model=\"form_invite.email\" autocomplete=\"off\" />\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogInviteVisible = false; form_invite.email = '' \">取 消</el-button>\r\n        <el-button @click=\"invite(),dialogInviteVisible = false\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n    <el-dialog title=\"团队重命名\" :visible.sync=\"dialogRenameVisible\">\r\n      <el-form :model=\"form_rename\">\r\n        <el-form-item label=\"新的团队名称\" :label-width=\"formLabelWidth\">\r\n          <el-input v-model=\"form_rename.teamName\" autocomplete=\"off\" />\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogRenameVisible = false; form_rename.teamName = '' \">取 消</el-button>\r\n        <el-button @click=\"Rename\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n    <el-dialog title=\"创建新项目\" :visible.sync=\"dialogCreateProjectVisible\">\r\n      <el-form :model=\"form_project\">\r\n        <el-form-item label=\"项目名称\" :label-width=\"formLabelWidth\">\r\n          <el-input v-model=\"form_createProject.project_name\" autocomplete=\"off\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"项目简介(可不填)\" :label-width=\"formLabelWidth\">\r\n          <el-input v-model=\"form_createProject.project_info\" autocomplete=\"off\" />\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogCreateProjectVisible = false; form_createProject.project_name = '' \">取 消</el-button>\r\n        <el-button @click=\"createProject(), dialogCreateProjectVisible = false\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n    <el-dialog title=\"修改项目信息\" :visible.sync=\"dialogUpdateProjectVisible\">\r\n      <el-form :model=\"form_project\">\r\n        <el-form-item label=\"项目新名称\" :label-width=\"formLabelWidth\">\r\n          <el-input v-model=\"form_updateProject.project_name\" autocomplete=\"off\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"项目新简介（可不填）\" :label-width=\"formLabelWidth\">\r\n          <el-input v-model=\"form_updateProject.project_info\" autocomplete=\"off\" />\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogUpdateProjectVisible = false; form_updateProject.project_name = '' \">取 消</el-button>\r\n        <el-button @click=\"updateProject(), dialogUpdateProjectVisible = false\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n    <el-dialog title=\"设置权限\" :visible.sync=\"dialogPerm\">\r\n      <el-form :model=\"form_power\">\r\n        <el-form-item label=\"权限（请输入“成员”或者“管理员”）\" :label-width=\"formLabelWidth\">\r\n          <el-input v-model=\"form_power.userPerm\" autocomplete=\"off\" />\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogPerm = false; form_power.userPerm = '' \">取 消</el-button>\r\n        <el-button @click=\"givePower\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n    <TableBody ref=\"tableBody\" class=\"temptablebody\">\r\n      <template>\r\n        <el-tabs :tab-position=\"top\" style=\"height: 200px;\" class=\"messagecss\">\r\n          <el-tab-pane>\r\n            <span slot=\"label\" class=\"fontClass\" style=\"font-size: large; color: #2c2c2c\">项目</span>\r\n            <el-table\r\n              ref=\"table\"\r\n              v-loading=\"tableloading\"\r\n              class=\"table-custom\"\r\n              :data=\"projectList\"\r\n              :header-cell-style=\"tableConfig.headerCellStyle\"\r\n              :size=\"tableConfig.size\"\r\n              :cell-style=\"tableConfig.cellStyle\"\r\n              @selection-change=\"handleSelectionChange\"\r\n              @row-dblclick=\"handleCurrentChange\"\r\n            >\r\n              <el-table-column\r\n                type=\"selection\"\r\n                width=\"45\"\r\n              />\r\n              <el-table-column\r\n                align=\"center\"\r\n                label=\"名称\"\r\n                prop=\"project_name\"\r\n                width=\"300px\"\r\n              />\r\n              <el-table-column\r\n                align=\"center\"\r\n                label=\"简介\"\r\n                prop=\"project_info\"\r\n                width=\"300px\"\r\n              />\r\n              <el-table-column\r\n                align=\"center\"\r\n                label=\"操作\"\r\n                width=\"300\"\r\n              >\r\n                <template slot-scope=\"scope\">\r\n                  <el-button\r\n                    slot=\"reference\"\r\n                    class=\"spcbutton-style\"\r\n                  >\r\n                    <el-dropdown trigger=\"click\" @command=\"onCommad\">\r\n                      <div class=\"action-wrapper\" style=\"font-size: 16px ;font-weight: bold\">\r\n                        <span class=\"nick-name el-dropdown-link\">\r\n                          <i class=\"el-icon-more\"></i>\r\n                        </span>\r\n                      </div>\r\n                      <el-dropdown-menu slot=\"dropdown\">\r\n                        <el-dropdown-item icon=\"el-icon-edit-outline\" command=\"personalCenter\">\r\n                          <el-button type=\"text\" @click=\"form_updateProject.project_id = scope.row.project_id, form_updateProject.project_name = scope.row.project_name, form_updateProject.project_info = scope.row.project_info,dialogUpdateProjectVisible = true\">修改项目信息</el-button>\r\n                        </el-dropdown-item>\r\n                        <el-dropdown-item icon=\"el-icon-switch-button\" command=\"logout\">\r\n                          <el-button type=\"text\" @click=\"deleteProjectItem(scope.row)\">删除项目</el-button>\r\n                        </el-dropdown-item>\r\n                      </el-dropdown-menu>\r\n                    </el-dropdown>\r\n                  </el-button>\r\n                </template>\r\n              </el-table-column>\r\n            </el-table>\r\n          </el-tab-pane>\r\n          <el-tab-pane>\r\n            <span slot=\"label\" class=\"fontClass\" style=\"font-size: large; color: #2c2c2c\">成员</span>\r\n            <el-table\r\n              ref=\"table\"\r\n              v-loading=\"loading\"\r\n              :data=\"memberList\"\r\n              :header-cell-style=\"tableConfig.headerCellStyle\"\r\n              :size=\"tableConfig.size\"\r\n              @selection-change=\"handleSelectionChange\"\r\n            >\r\n              <el-table-column\r\n                type=\"selection\"\r\n                width=\"45\"\r\n              />\r\n              <el-table-column\r\n                align=\"center\"\r\n                label=\"序号\"\r\n                width=\"60\"\r\n              >\r\n                <template slot-scope=\"scope\">\r\n                  {{ scope.$index + 1 }}\r\n                </template>\r\n              </el-table-column>\r\n              <el-table-column\r\n                align=\"center\"\r\n                label=\"昵称\"\r\n                prop=\"username\"\r\n                width=\"150px\"\r\n              />\r\n              <el-table-column\r\n                align=\"center\"\r\n                label=\"真实姓名\"\r\n                prop=\"real_name\"\r\n                width=\"150px\"\r\n              />\r\n              <el-table-column\r\n                align=\"center\"\r\n                label=\"电子邮箱\"\r\n                prop=\"email\"\r\n                width=\"220px\"\r\n              />\r\n              <el-table-column\r\n                align=\"center\"\r\n                label=\"身份\"\r\n                prop=\"user_perm\"\r\n                width=\"100px\"\r\n              />\r\n              <el-table-column\r\n                align=\"center\"\r\n                label=\"操作\"\r\n                width=\"220\"\r\n              >\r\n                <template slot-scope=\"scope\">\r\n                  <el-button\r\n                    slot=\"reference\"\r\n                    class=\"spcbutton-style\"\r\n                  >\r\n                    <el-dropdown trigger=\"click\" @command=\"onCommad\">\r\n                      <div class=\"action-wrapper\">\r\n                        <span class=\"nick-name el-dropdown-link\">\r\n                          <i class=\"el-icon-more\"></i>\r\n                        </span>\r\n                      </div>\r\n                      <el-dropdown-menu slot=\"dropdown\">\r\n                        <el-dropdown-item icon=\"el-icon-circle-check\" command=\"personalCenter\">\r\n                          <el-button type=\"text\" @click=\"form_power.memberId = scope.row.user_id, form_power.userPerm = scope.row.user_perm, dialogPerm = true\">赋予管理员权限</el-button>\r\n                        </el-dropdown-item>\r\n                        <el-dropdown-item icon=\"el-icon-close\" command=\"logout\">\r\n                          <el-button type=\"text\" @click=\"deleteMemberItem(scope.row)\">移出团队</el-button>\r\n                        </el-dropdown-item>\r\n                      </el-dropdown-menu>\r\n                    </el-dropdown>\r\n                  </el-button>\r\n                </template>\r\n              </el-table-column>\r\n            </el-table>\r\n          </el-tab-pane>\r\n        </el-tabs>\r\n      </template>\r\n    </TableBody>\r\n    <TableBody ref=\"tableBody\" class=\"rightside\">\r\n      <template>\r\n        <div class=\"rightsidefont\">\r\n          About\r\n        </div>\r\n        <el-divider />\r\n        <div>\r\n          <span>{{ teamInfo }}</span>\r\n          <el-divider />\r\n        </div>\r\n      </template>\r\n    </TableBody>\r\n\r\n    <!--    <TableFooter-->\r\n    <!--      :page-size=\"pageModel.pageSize\"-->\r\n    <!--      :total-size=\"pageModel.totalSize\"-->\r\n    <!--      @pageSizeChanged=\"pageSizeChanged\"-->\r\n    <!--      @currentChanged=\"currentChanged\"-->\r\n    <!--      @onRefresh=\"doRefresh\"-->\r\n    <!--    />-->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport TableMixin, { PageModelMixin } from '@/mixins/TableMixin'\r\nimport {\r\n  GetDataMixin,\r\n  AddItemMixin,\r\n  DeleteItemsMixin,\r\n  UpdateItemMixin,\r\n  RefreshActionMixin\r\n} from '@/mixins/ActionMixin'\r\nimport SingleUpload from '@/components/common/SingleUpload.vue'\r\nimport BaseForm from '@/components/common/BaseForm.vue'\r\nimport draggable from '@/directive/draggable'\r\nimport store from '@/layouts/store'\r\nimport qs from 'qs'\r\nimport { getters } from '@/store/modules/user.js'\r\nimport { state } from '@/store/modules/user.js'\r\nexport default {\r\n  name: 'TableGroupMember',\r\n  // eslint-disable-next-line vue/no-unused-components\r\n  components: { SingleUpload, BaseForm },\r\n  directives: { draggable },\r\n  mixins: [\r\n    TableMixin,\r\n    PageModelMixin,\r\n    GetDataMixin,\r\n    AddItemMixin,\r\n    DeleteItemsMixin,\r\n    UpdateItemMixin,\r\n    RefreshActionMixin\r\n  ],\r\n  data() {\r\n    return {\r\n      visible_setPerm: true,\r\n      loading: false,\r\n      dialogRenameVisible: false,\r\n      dialogPerm: false,\r\n      form_member: {\r\n        token: getters.getToken(state),\r\n        user_id: getters.getUserId(state),\r\n        teamId: localStorage.getItem('team_id')\r\n      },\r\n      teamInfo: localStorage.getItem('team_info'),\r\n      form_power: {\r\n        token: getters.getToken(state),\r\n        user_id: getters.getUserId(state),\r\n        teamId: localStorage.getItem('team_id'),\r\n        memberId: '',\r\n        userPerm: ''\r\n      },\r\n      form_getProjectList: {\r\n        token: getters.getToken(state),\r\n        user_id: getters.getUserId(state),\r\n        team_id: localStorage.getItem('team_id')\r\n      },\r\n      form_createProject: {\r\n        token: getters.getToken(state),\r\n        user_id: getters.getUserId(state),\r\n        team_id: localStorage.getItem('team_id'),\r\n        project_name: '',\r\n        project_info: ''\r\n      },\r\n      form_deleteProject: {\r\n        token: getters.getToken(state),\r\n        user_id: getters.getUserId(state),\r\n        project_id: 0\r\n      },\r\n      form_updateProject: {\r\n        token: getters.getToken(state),\r\n        user_id: getters.getUserId(state),\r\n        project_id: 0,\r\n        project_name: '',\r\n        project_info: ''\r\n      },\r\n      visible: false,\r\n      form_invite: {\r\n        token: getters.getToken(state),\r\n        user_id: getters.getUserId(state),\r\n        teamId: Number(localStorage.getItem('team_id')),\r\n        email: ''\r\n      },\r\n      form_project: {\r\n        token: getters.getToken(state),\r\n        username: getters.getUserName(state),\r\n        project_name: '',\r\n        team_id: Number(localStorage.getItem('team_id'))\r\n      },\r\n      form_deleteMember: {\r\n        token: getters.getToken(state),\r\n        username: getters.getUserName(state),\r\n        user_id: getters.getUserId(state),\r\n        teamId: Number(localStorage.getItem('team_id')),\r\n        memberId: null\r\n      },\r\n      form_rename: {\r\n        token: getters.getToken(state),\r\n        user_id: getters.getUserId(state),\r\n        teamId: Number(localStorage.getItem('team_id')),\r\n        teamName: ''\r\n      },\r\n      form_quitTeam: {\r\n        token: getters.getToken(state),\r\n        user_id: getters.getUserId(state),\r\n        teamId: Number(localStorage.getItem('team_id'))\r\n      },\r\n      form_setPerm: {\r\n        token: getters.getToken(state),\r\n        username: getters.getUserName(state),\r\n        user_id: getters.getUserId(state),\r\n        team_id: Number(localStorage.getItem('team_id')),\r\n        member_id: 0,\r\n        perm: null\r\n      },\r\n      team_name: localStorage.getItem('team_name'),\r\n      dialogInviteVisible: false,\r\n      dialogCreateProjectVisible: false,\r\n      dialogUpdateProjectVisible: false,\r\n      dialogMethodVisible: false,\r\n      memberList: [],\r\n      projectList: [],\r\n      deleteMemberList: [],\r\n      powerOptions: [\r\n        {\r\n          value: 1,\r\n          label: '队长'\r\n        },\r\n        {\r\n          value: 2,\r\n          label: '开发者'\r\n        },\r\n        {\r\n          value: 3,\r\n          label: '观察者'\r\n        }\r\n      ],\r\n      userModel: {\r\n        address: '',\r\n        avatar: '',\r\n        gender: 1,\r\n        id: 1,\r\n        lastLoginIp: '',\r\n        lastLoginTime: '',\r\n        nickName: '',\r\n        status: 0,\r\n        vip: 1\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.getMemberList()\r\n    this.getProjectList()\r\n  },\r\n  methods: {\r\n    givePower() {\r\n      if (this.form_power.userPerm === '管理员') {\r\n        this.form_power.userPerm = 1\r\n      } else if (this.form_power.userPerm === '成员') {\r\n        this.form_power.userPerm = 2\r\n      } else {\r\n        this.form_power.userPerm = 0\r\n      }\r\n      this.$axios.post('/team/setPerm', qs.stringify(this.form_power))\r\n      .then(res => {\r\n        if (res.data.success) {\r\n          this.$message.success(res.data.message)\r\n        } else {\r\n          this.$message.error(res.data.message)\r\n        }\r\n        this.dialogPerm = false\r\n        this.getMemberList()\r\n      })\r\n    },\r\n    getProjectList() {\r\n      this.loading = true\r\n      this.projectList = []\r\n      this.$axios.post('/project/getProjectList', qs.stringify(this.form_getProjectList))\r\n        .then((res) => {\r\n          if (res.data.success) {\r\n            for (let i = 0; i < res.data.data.length; i++) {\r\n              const projects = {\r\n                project_id: 0,\r\n                team_id: 0,\r\n                project_name: '',\r\n                project_info: ''\r\n              }\r\n              projects.project_id = res.data.data[i].project_id\r\n              projects.team_id = res.data.data[i].team_id\r\n              projects.project_name = res.data.data[i].project_name\r\n              projects.project_info = res.data.data[i].project_info\r\n              let flag = 0\r\n              for (let i = 0; i < this.projectList.length; i++) {\r\n                if (this.projectList[i].project_id === projects.project_id) {\r\n                  flag = 1\r\n                  break\r\n                }\r\n              }\r\n              if (!flag) { this.projectList.push(projects) }\r\n              // this.$message.success(res.data.message)\r\n            }\r\n          } else {\r\n             this.$message.error(res.data.message)\r\n          }\r\n           this.loading = false\r\n         })\r\n    },\r\n    getMemberList() {\r\n      this.loading = true\r\n      this.memberList = []\r\n      this.$axios.post('/team/getMemberList', qs.stringify(this.form_member))\r\n        .then((res) => {\r\n          if (res.data.success) {\r\n            for (let i = 0; i < res.data.data.length; i++) {\r\n              const members = {\r\n                user_id: 0,\r\n                username: '',\r\n                email: '',\r\n                user_perm: '',\r\n                real_name: ''\r\n              }\r\n              members.user_id = res.data.data[i].user_id\r\n              members.real_name = res.data.data[i].real_name\r\n              members.email = res.data.data[i].email\r\n              members.username = res.data.data[i].username\r\n              if (res.data.data[i].user_perm === 0) {\r\n                members.user_perm = '超管'\r\n              } else if (res.data.data[i].user_perm === 1) {\r\n                members.user_perm = '管理员'\r\n              } else if (res.data.data[i].user_perm === 2) {\r\n                members.user_perm = '成员'\r\n              }\r\n              let flag = 0\r\n              for (let i = 0; i < this.memberList.length; i++) {\r\n                if (this.memberList[i].user_id === members.user_id) {\r\n                  flag = 1\r\n                  break\r\n                }\r\n              }\r\n              if (!flag) { this.memberList.push(members) }\r\n              // this.$message.success(res.data.message)\r\n            }\r\n          } else {\r\n             this.$message.error(res.data.message)\r\n          }\r\n           this.loading = false\r\n         })\r\n    },\r\n    createProject() {\r\n      this.$axios.post('/project/create', qs.stringify(this.form_createProject))\r\n        .then((res) => {\r\n          // console.log(5)\r\n          if (res.data.success) {\r\n            this.$message.success(res.data.message)\r\n          } else {\r\n            this.$message.error(res.data.message)\r\n          }\r\n          this.getProjectList()\r\n        })\r\n    },\r\n    Rename() {\r\n      this.$axios.post('/team/update', qs.stringify(this.form_rename))\r\n      .then(res => {\r\n          if (res.data.success === true) {\r\n            this.team_name = this.form_rename.teamName\r\n            this.$message.success(res.data.message)\r\n            this.dialogRenameVisible = false\r\n            this.form_rename.teamName = ''\r\n          } else {\r\n            this.$message.error(res.data.message)\r\n            this.dialogRenameVisible = false\r\n            this.form_rename.teamName = ''\r\n          }\r\n      })\r\n    },\r\n    setPerm(item) {\r\n      this.form_setPerm.member_id = item.id\r\n      this.$axios.post('/team/set_perm', qs.stringify(this.form_setPerm))\r\n        .then((res) => {\r\n          // console.log(5)\r\n          if (res.data.result === 7) {\r\n            this.$message.success(res.data.message)\r\n          } else {\r\n            this.$message.error(res.data.message)\r\n          }\r\n          this.getMemberList()\r\n        })\r\n    },\r\n    deleteProjectItem(item) {\r\n      this.$confirm('此操作将使您删除此项目' + ', 是否继续?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n    }).then(() => {\r\n      this.deleteProject(item)\r\n      }).catch(() => {\r\n        this.$message({\r\n          type: 'info',\r\n          message: '已取消操作'\r\n        })\r\n      })\r\n    },\r\n    deleteProject(item) {\r\n      this.form_deleteProject.project_id = item.project_id\r\n      this.$axios.post('/project/delete', qs.stringify(this.form_deleteProject))\r\n        .then((res) => {\r\n          // console.log(5)\r\n          if (res.data.success) {\r\n            this.$message.success(res.data.message)\r\n          } else {\r\n            this.$message.error(res.data.message)\r\n          }\r\n          this.getProjectList()\r\n        })\r\n    },\r\n    updateProject() {\r\n      // this.form_updateProject.project_id = item.project_id\r\n      this.$axios.post('/project/update', qs.stringify(this.form_updateProject))\r\n        .then((res) => {\r\n          // console.log(5)\r\n          if (res.data.success) {\r\n            this.$message.success(res.data.message)\r\n          } else {\r\n            this.$message.error(res.data.message)\r\n          }\r\n          this.getProjectList()\r\n        })\r\n    },\r\n    deleteItem(item) {\r\n      if (item.id === this.form_deleteMember.user_id) {\r\n        this.$confirm('此操作将使您退出此团队' + ', 是否继续?', '提示', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n      }).then(() => {\r\n        this.quitTeam()\r\n        }).catch(() => {\r\n          this.$message({\r\n            type: 'info',\r\n            message: '已取消操作'\r\n          })\r\n        })\r\n      } else {\r\n        this.$confirm('此操作将踢出用户成员' + item.username + ', 是否继续?', '提示', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n      }).then(() => {\r\n        this.deleteMember(item)\r\n        }).catch(() => {\r\n          this.$message({\r\n            type: 'info',\r\n            message: '已取消操作'\r\n          })\r\n        })\r\n      }\r\n    },\r\n    handleSelectionChange(items) {\r\n      this.deleteMemberList = items\r\n    },\r\n    deleteMultiItem() {\r\n      this.$confirm('此操作将踢出您选中的所有成员, 是否继续?', '提示', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n      }).then(() => {\r\n        for (let i = 0; i < this.deleteMemberList.length; i++) {\r\n          this.deleteMember(this.deleteMemberList[i])\r\n        }\r\n        this.getMemberList()\r\n        }).catch(() => {\r\n          this.$message({\r\n            type: 'info',\r\n            message: '已取消踢出'\r\n          })\r\n        })\r\n    },\r\n    deleteMemberItem(item) {\r\n      this.$confirm('此操作将踢出用户成员' + item.username + ', 是否继续?', '提示', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n      }).then(() => {\r\n        this.deleteMember(item)\r\n        }).catch(() => {\r\n          this.$message({\r\n            type: 'info',\r\n            message: '已取消操作'\r\n          })\r\n        })\r\n    },\r\n    deleteMember(item) {\r\n      this.form_deleteMember.memberId = item.user_id\r\n      // console.log(item.id)\r\n      this.$axios.post('/team/deleteMember', qs.stringify(this.form_deleteMember))\r\n        .then((res) => {\r\n          // console.log(5)\r\n          if (res.data.success) {\r\n            this.$message.success(res.data.message)\r\n          } else {\r\n            this.$message.error(res.data.message)\r\n          }\r\n          this.getMemberList()\r\n        })\r\n    },\r\n    quitTeam() {\r\n      this.$confirm('此操作将使您退出该团队' + ', 是否继续?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n    }).then(() => {\r\n      this.$axios.post('/team/quitTeam', qs.stringify(this.form_quitTeam))\r\n        .then((res) => {\r\n          if (res.data.success) {\r\n            this.$message.success(res.data.message)\r\n            this.onGroupSpace()\r\n          } else {\r\n            this.$message.error(res.data.message)\r\n          }\r\n        })\r\n      }).catch(() => {\r\n        this.$message({\r\n          type: 'info',\r\n          message: '已取消操作'\r\n        })\r\n      })\r\n    },\r\n    deleteTeam() {\r\n      this.$confirm('此操作将使您删除该团队' + ', 是否继续?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n    }).then(() => {\r\n      this.$axios.post('/team/delete', qs.stringify(this.form_quitTeam))\r\n        .then((res) => {\r\n          if (res.data.success) {\r\n            this.$message.success(res.data.message)\r\n            this.onGroupSpace()\r\n          } else {\r\n            this.$message.error(res.data.message)\r\n          }\r\n        })\r\n      }).catch(() => {\r\n        this.$message({\r\n          type: 'info',\r\n          message: '已取消操作'\r\n        })\r\n      })\r\n    },\r\n    handleCurrentChange(val) {\r\n      this.toProject(val)\r\n    },\r\n    onGroupSpace() {\r\n      store.toGroupSpace && store.toGroupSpace()\r\n    },\r\n    clearList() {\r\n      this.memberList = []\r\n    },\r\n    toProject(item) {\r\n      localStorage.setItem('project_id', item.project_id)\r\n      localStorage.setItem('project_name', item.project_name)\r\n      this.$router.push('/list/table-group-project')\r\n    },\r\n    invite() {\r\n      this.$axios.post('/team/inviteMember', qs.stringify(this.form_invite))\r\n         .then((res) => {\r\n           if (res.data.success) {\r\n             this.$message.success(res.data.message)\r\n           } else {\r\n             this.$message.error(res.data.message)\r\n           }\r\n           this.getMemberList()\r\n         })\r\n    },\r\n    onRichTextEditor() {\r\n      store.toRichTextEditor && store.toRichTextEditor()\r\n    },\r\n    onChooseTemplate() {\r\n      store.toChooseTemplate && store.toChooseTemplate()\r\n    },\r\n    onSingleSuccess({ res }) {\r\n      if (res.status !== 200) {\r\n        this.$errorMsg(res.msg)\r\n      } else {\r\n        this.userModel = res.obj\r\n      }\r\n    },\r\n    beforeUpload(file) {\r\n      const size = file.size\r\n      if (size / 1024 > 500) {\r\n        this.$errorMsg('上传文件最大不能超过500K')\r\n        return false\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.button-style {\r\n  margin: 10px;\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  color: black;\r\n  height: 45px;\r\n}\r\n.table-custom {\r\n\r\n}\r\n.teamtitle {\r\n  font-size: 50px;\r\n  margin-left: 10px;\r\n  margin-top: 10px;\r\n  margin-bottom: 20px;\r\n}\r\n.temptablebody{\r\n  height: 500px;\r\n  width: 75%;\r\n  float: left;\r\n}\r\n.messagecss{\r\n  width: 947px;\r\n  margin: 10px;\r\n}\r\n.rightside{\r\n  float: right;\r\n  width: 23%;\r\n  margin: 10px;\r\n  height: 500px;\r\n}\r\n.rightsidefont{\r\n  font-size: 25px;\r\n  margin: 10px;\r\n}\r\n</style>\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/views/list/table-group-message.vue b/src/views/list/table-group-message.vue
--- a/src/views/list/table-group-message.vue	(revision 71b33b34279be4d6a8198c9d72a84cd5c102d8ad)
+++ b/src/views/list/table-group-message.vue	(date 1659617019725)
@@ -749,6 +749,7 @@
     toProject(item) {
       localStorage.setItem('project_id', item.project_id)
       localStorage.setItem('project_name', item.project_name)
+      localStorage.setItem('project_info', item.project_info)
       this.$router.push('/list/table-group-project')
     },
     invite() {
Index: src/views/list/table-group-project.vue
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><template>\r\n  <div class=\"main-container\">\r\n    <TableHeader :can-collapsed=\"false\">\r\n      <template slot=\"left\">\r\n        <p id=\"projectName\" class=\"projecttitle\">\r\n          {{ project_name }}\r\n        </p>\r\n        <p id=\"teamName\" class=\"teamtitle\">\r\n          该项目属于{{ team_name }}\r\n        </p>\r\n      </template>\r\n      <template slot=\"right\">\r\n        <el-popover\r\n          v-model=\"visible\"\r\n          placement=\"top\"\r\n          width=\"350\"\r\n        >\r\n          <el-button\r\n            slot=\"reference\"\r\n            class=\"button-style\"\r\n            @click=\"dialogInviteVisible = true\"\r\n          >创建文档\r\n            <i class=\"el-icon-plus\"></i>\r\n          </el-button>\r\n        </el-popover>\r\n\r\n        <el-popover\r\n          v-model=\"visible\"\r\n          placement=\"top\"\r\n          width=\"350\"\r\n          trigger=\"click\"\r\n        >\r\n          <el-button\r\n            slot=\"reference\"\r\n            class=\"button-style\"\r\n            @click=\"dialogProjectVisible = true\"\r\n          >创建原型\r\n            <i class=\"el-icon-plus\"></i>\r\n          </el-button>\r\n        </el-popover>\r\n\r\n        <el-popover\r\n          v-model=\"visible\"\r\n          placement=\"top\"\r\n          width=\"350\"\r\n        >\r\n          <el-button\r\n            slot=\"reference\"\r\n            class=\"button-style\"\r\n            @click=\"createUML()\"\r\n          >创建uml\r\n            <i class=\"el-icon-plus\"></i>\r\n          </el-button>\r\n        </el-popover>\r\n\r\n        <el-popover\r\n          v-model=\"visible\"\r\n          placement=\"top\"\r\n          width=\"350\"\r\n        >\r\n          <el-button\r\n            slot=\"reference\"\r\n            class=\"spcbutton-style\"\r\n          ><el-dropdown trigger=\"click\" @command=\"onCommad\">\r\n            <div class=\"action-wrapper\" style=\"font-size: 16px ;font-weight: bold\">\r\n              <i class=\"el-icon-setting\"></i>\r\n              设置\r\n            </div>\r\n            <el-dropdown-menu slot=\"dropdown\">\r\n              <el-dropdown-item icon=\"el-icon-edit-outline\" command=\"personalCenter\">\r\n                <el-button type=\"text\">重命名</el-button>\r\n              </el-dropdown-item>\r\n              <el-dropdown-item icon=\"el-icon-switch-button\" command=\"logout\">\r\n                <el-button type=\"text\" style=\"color: red\">删除项目</el-button>\r\n              </el-dropdown-item>\r\n            </el-dropdown-menu>\r\n          </el-dropdown>\r\n          </el-button>\r\n        </el-popover>\r\n      </template>\r\n    </TableHeader>\r\n    <el-dialog title=\"创建文档\" :visible.sync=\"dialogInviteVisible\">\r\n      <el-form :model=\"form_invite\">\r\n        <el-form-item label=\"文档名称\" :label-width=\"formLabelWidth\">\r\n          <el-input v-model=\"form_invite.accept_id\" autocomplete=\"off\" />\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogInviteVisible = false; form_invite.accept_id = '' \">取 消</el-button>\r\n        <el-button @click=\"Invite\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n\r\n    <el-dialog title=\"创建原型\" :visible.sync=\"dialogProjectVisible\">\r\n      <el-form :model=\"form_project\">\r\n        <el-form-item label=\"原型名称\" :label-width=\"formLabelWidth\">\r\n          <el-input v-model=\"form_project.project_name\" autocomplete=\"off\" />\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogProjectVisible = false; form_project.project_name = '' \">取 消</el-button>\r\n        <el-button @click=\"CreateProject\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n\r\n    <el-dialog title=\"创建uml\" :visible.sync=\"dialogMethodVisible\">\r\n      <el-form :model=\"form_project\">\r\n        <el-form-item label=\"uml名称\" :label-width=\"formLabelWidth\">\r\n          <el-input v-model=\"form_project.project_name\" autocomplete=\"off\" />\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogMethodVisible = false; form_project.project_name = '' \">取 消</el-button>\r\n        <el-button @click=\"CreateProject\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n    <TableBody ref=\"tableBody\" class=\"temptablebody\">\r\n      <template>\r\n        <el-tabs :tab-position=\"top\" style=\"height: 200px;\" class=\"messagecss\">\r\n          <el-tab-pane>\r\n            <span slot=\"label\" class=\"fontClass\" style=\"font-size: large; color: #2c2c2c\">文档</span>\r\n            <el-table\r\n              ref=\"table\"\r\n              v-loading=\"loading\"\r\n              class=\"table-custom\"\r\n              :data=\"memberList\"\r\n              :header-cell-style=\"tableConfig.headerCellStyle\"\r\n              :size=\"tableConfig.size\"\r\n              @selection-change=\"handleSelectionChange\"\r\n            >\r\n              <el-table-column\r\n                type=\"selection\"\r\n                width=\"45\"\r\n              />\r\n              <el-table-column\r\n                align=\"center\"\r\n                label=\"名称\"\r\n                prop=\"projectname\"\r\n                width=\"250px\"\r\n              />\r\n              <el-table-column\r\n                align=\"center\"\r\n                label=\"更新时间\"\r\n                prop=\"updatetime\"\r\n                width=\"250px\"\r\n              />\r\n              <el-table-column\r\n                align=\"center\"\r\n                label=\"创建者\"\r\n                prop=\"user\"\r\n                width=\"200px\"\r\n              />\r\n              <el-table-column\r\n                align=\"center\"\r\n                label=\"操作\"\r\n                width=\"200\"\r\n              >\r\n                <template slot-scope=\"scope\">\r\n                  <el-dropdown trigger=\"click\" @command=\"onCommad\">\r\n                    <div class=\"action-wrapper\">\r\n                      <span class=\"nick-name el-dropdown-link\">\r\n                        <i class=\"el-icon-more\"></i>\r\n                      </span>\r\n                    </div>\r\n                    <el-dropdown-menu slot=\"dropdown\">\r\n                      <el-dropdown-item icon=\"el-icon-edit-outline\" command=\"personalCenter\">\r\n                        <el-button type=\"text\">重命名</el-button>\r\n                      </el-dropdown-item>\r\n                      <el-dropdown-item icon=\"el-icon-switch-button\" command=\"logout\">\r\n                        <el-button type=\"text\">删除文件</el-button>\r\n                      </el-dropdown-item>\r\n                    </el-dropdown-menu>\r\n                  </el-dropdown>\r\n                </template>\r\n              </el-table-column>\r\n            </el-table>\r\n          </el-tab-pane>\r\n          <el-tab-pane>\r\n            <span slot=\"label\" class=\"fontClass\" style=\"font-size: large; color: #2c2c2c\">原型</span>\r\n            <el-table\r\n              ref=\"table\"\r\n              v-loading=\"loading\"\r\n              class=\"table-custom\"\r\n              :data=\"memberList\"\r\n              :header-cell-style=\"tableConfig.headerCellStyle\"\r\n              :size=\"tableConfig.size\"\r\n              @selection-change=\"handleSelectionChange\"\r\n            >\r\n              <el-table-column\r\n                type=\"selection\"\r\n                width=\"45\"\r\n              />\r\n              <el-table-column\r\n                align=\"center\"\r\n                label=\"名称\"\r\n                prop=\"projectname\"\r\n                width=\"250px\"\r\n              />\r\n              <el-table-column\r\n                align=\"center\"\r\n                label=\"更新时间\"\r\n                prop=\"updatetime\"\r\n                width=\"250px\"\r\n              />\r\n              <el-table-column\r\n                align=\"center\"\r\n                label=\"创建者\"\r\n                prop=\"user\"\r\n                width=\"200px\"\r\n              />\r\n              <el-table-column\r\n                align=\"center\"\r\n                label=\"操作\"\r\n                width=\"200\"\r\n              >\r\n                <template slot-scope=\"scope\">\r\n                  <el-dropdown trigger=\"click\" @command=\"onCommad\">\r\n                    <div class=\"action-wrapper\">\r\n                      <span class=\"nick-name el-dropdown-link\">\r\n                        <i class=\"el-icon-more\"></i>\r\n                      </span>\r\n                    </div>\r\n                    <el-dropdown-menu slot=\"dropdown\">\r\n                      <el-dropdown-item icon=\"el-icon-edit-outline\" command=\"personalCenter\">\r\n                        <el-button type=\"text\">重命名</el-button>\r\n                      </el-dropdown-item>\r\n                      <el-dropdown-item icon=\"el-icon-switch-button\" command=\"logout\">\r\n                        <el-button type=\"text\">删除文件</el-button>\r\n                      </el-dropdown-item>\r\n                    </el-dropdown-menu>\r\n                  </el-dropdown>\r\n                </template>\r\n              </el-table-column>\r\n            </el-table>\r\n          </el-tab-pane>\r\n        </el-tabs>\r\n      </template>\r\n    </TableBody>\r\n    <TableBody ref=\"tableBody\" class=\"rightside\">\r\n      <template>\r\n        <div class=\"rightsidefont\">\r\n          About\r\n        </div>\r\n        <el-divider />\r\n        <div>\r\n          <span>青春是一个短暂的美梦, 当你醒来时, 它早已消失无踪</span>\r\n          <el-divider />\r\n          <span>少量的邪恶足以抵消全部高贵的品质, 害得人声名狼藉</span>\r\n        </div>\r\n      </template>\r\n    </TableBody>\r\n\r\n    <!--    <TableFooter-->\r\n    <!--      :page-size=\"pageModel.pageSize\"-->\r\n    <!--      :total-size=\"pageModel.totalSize\"-->\r\n    <!--      @pageSizeChanged=\"pageSizeChanged\"-->\r\n    <!--      @currentChanged=\"currentChanged\"-->\r\n    <!--      @onRefresh=\"doRefresh\"-->\r\n    <!--    />-->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport TableMixin, { PageModelMixin } from '@/mixins/TableMixin'\r\nimport {\r\n  GetDataMixin,\r\n  AddItemMixin,\r\n  DeleteItemsMixin,\r\n  UpdateItemMixin,\r\n  RefreshActionMixin\r\n} from '@/mixins/ActionMixin'\r\nimport SingleUpload from '@/components/common/SingleUpload.vue'\r\nimport BaseForm from '@/components/common/BaseForm.vue'\r\nimport draggable from '@/directive/draggable'\r\nimport store from '@/layouts/store'\r\nimport qs from 'qs'\r\nimport { getters } from '@/store/modules/user.js'\r\nimport { state } from '@/store/modules/user.js'\r\nimport router from '@/router'\r\nexport default {\r\n  name: 'TableGroupMember',\r\n  // eslint-disable-next-line vue/no-unused-components\r\n  components: { SingleUpload, BaseForm },\r\n  directives: { draggable },\r\n  mixins: [\r\n    TableMixin,\r\n    PageModelMixin,\r\n    GetDataMixin,\r\n    AddItemMixin,\r\n    DeleteItemsMixin,\r\n    UpdateItemMixin,\r\n    RefreshActionMixin\r\n  ],\r\n  data() {\r\n    return {\r\n      visible_setPerm: true,\r\n      loading: false,\r\n      form_member: {\r\n        token: getters.getToken(state),\r\n        username: getters.getUserName(state),\r\n        user_id: getters.getUserId(state),\r\n        team_id: Number(localStorage.getItem('team_id'))\r\n      },\r\n      visible: false,\r\n      form_invite: {\r\n        token: getters.getToken(state),\r\n        username: getters.getUserName(state),\r\n        send_id: getters.getUserId(state),\r\n        accept_id: null,\r\n        team_id: Number(localStorage.getItem('team_id')),\r\n        power: null\r\n      },\r\n      form_project: {\r\n        token: getters.getToken(state),\r\n        username: getters.getUserName(state),\r\n        project_name: '',\r\n        team_id: Number(localStorage.getItem('team_id'))\r\n      },\r\n      form_deleteMember: {\r\n        token: getters.getToken(state),\r\n        username: getters.getUserName(state),\r\n        user_id: getters.getUserId(state),\r\n        team_id: Number(localStorage.getItem('team_id')),\r\n        deleted_id: null\r\n      },\r\n      form_quitTeam: {\r\n        token: getters.getToken(state),\r\n        username: getters.getUserName(state),\r\n        user_id: getters.getUserId(state),\r\n        team_id: Number(localStorage.getItem('team_id'))\r\n      },\r\n      form_setPerm: {\r\n        token: getters.getToken(state),\r\n        username: getters.getUserName(state),\r\n        user_id: getters.getUserId(state),\r\n        team_id: Number(localStorage.getItem('team_id')),\r\n        member_id: 0,\r\n        perm: null\r\n      },\r\n      project_name: localStorage.getItem('project_name'),\r\n      team_name: localStorage.getItem('team_name'),\r\n      dialogInviteVisible: false,\r\n      dialogProjectVisible: false,\r\n      dialogMethodVisible: false,\r\n      memberList: [],\r\n      deleteMemberList: [],\r\n      powerOptions: [\r\n        {\r\n          value: 1,\r\n          label: '队长'\r\n        },\r\n        {\r\n          value: 2,\r\n          label: '开发者'\r\n        },\r\n        {\r\n          value: 3,\r\n          label: '观察者'\r\n        }\r\n      ],\r\n      userModel: {\r\n        address: '',\r\n        avatar: '',\r\n        gender: 1,\r\n        id: 1,\r\n        lastLoginIp: '',\r\n        lastLoginTime: '',\r\n        nickName: '',\r\n        status: 0,\r\n        vip: 1\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.getMemberList()\r\n  },\r\n  methods: {\r\n    createUML() {\r\n      router.push('/drawio')\r\n    },\r\n    CreateProject() {\r\n      this.$message.error('还没写接口哪！')\r\n    },\r\n    setPerm(item) {\r\n      this.form_setPerm.member_id = item.id\r\n      this.$axios.post('/team/set_perm', qs.stringify(this.form_setPerm))\r\n        .then((res) => {\r\n          // console.log(5)\r\n          if (res.data.result === 7) {\r\n            this.$message.success(res.data.message)\r\n          } else {\r\n            this.$message.error(res.data.message)\r\n          }\r\n          this.getMemberList()\r\n        })\r\n    },\r\n    deleteItem(item) {\r\n      if (item.id === this.form_deleteMember.user_id) {\r\n        this.$confirm('此操作将使您退出此团队' + ', 是否继续?', '提示', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n      }).then(() => {\r\n        this.quitTeam()\r\n        }).catch(() => {\r\n          this.$message({\r\n            type: 'info',\r\n            message: '已取消操作'\r\n          })\r\n        })\r\n      } else {\r\n        this.$confirm('此操作将踢出用户成员' + item.username + ', 是否继续?', '提示', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n      }).then(() => {\r\n        this.deleteMember(item)\r\n        }).catch(() => {\r\n          this.$message({\r\n            type: 'info',\r\n            message: '已取消操作'\r\n          })\r\n        })\r\n      }\r\n    },\r\n    handleSelectionChange(items) {\r\n      this.deleteMemberList = items\r\n    },\r\n    deleteMultiItem() {\r\n      this.$confirm('此操作将踢出您选中的所有成员, 是否继续?', '提示', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n      }).then(() => {\r\n        for (let i = 0; i < this.deleteMemberList.length; i++) {\r\n          this.deleteMember(this.deleteMemberList[i])\r\n        }\r\n        this.getMemberList()\r\n        }).catch(() => {\r\n          this.$message({\r\n            type: 'info',\r\n            message: '已取消踢出'\r\n          })\r\n        })\r\n    },\r\n    deleteMember(item) {\r\n      this.form_deleteMember.deleted_id = item.id\r\n      // console.log(item.id)\r\n      this.$axios.post('/team/delete_member', qs.stringify(this.form_deleteMember))\r\n        .then((res) => {\r\n          // console.log(5)\r\n          if (res.data.result === 5) {\r\n            this.$message.success(res.data.message)\r\n          } else {\r\n            this.$message.error(res.data.message)\r\n          }\r\n          this.getMemberList()\r\n        })\r\n    },\r\n    quitTeam() {\r\n      this.$axios.post('/team/quit_team', qs.stringify(this.form_quitTeam))\r\n        .then((res) => {\r\n          if (res.data.result === 5) {\r\n            this.$message.success(res.data.message)\r\n          } else {\r\n            this.$message.error(res.data.message)\r\n          }\r\n          this.onGroupSpace()\r\n        })\r\n    },\r\n    onGroupSpace() {\r\n      store.toGroupSpace && store.toGroupSpace()\r\n    },\r\n    clearList() {\r\n      this.memberList = []\r\n    },\r\n    onFile() {\r\n      this.$router.push('/list/table-group-file')\r\n    },\r\n    getMemberList() {\r\n      this.loading = true\r\n      this.clearList()\r\n      this.$axios.post('/team/get_team_member_list', qs.stringify(this.form_member))\r\n        .then((res) => {\r\n          if (res.data.result === 4) {\r\n            for (let i = 0; i < res.data.team_member_list.length; i++) {\r\n              const members = {\r\n                sno: 0,\r\n                id: 0,\r\n                username: '',\r\n                email: '',\r\n                power: ''\r\n              }\r\n              members.sno = i + 1\r\n              members.id = res.data.team_member_list[i].id\r\n              members.username = res.data.team_member_list[i].username\r\n              members.email = res.data.team_member_list[i].email\r\n              if (res.data.team_member_list[i].power === 1) {\r\n                members.power = '队长'\r\n              } else if (res.data.team_member_list[i].power === 2) {\r\n                members.power = '开发者'\r\n              } else if (res.data.team_member_list[i].power === 3) {\r\n                members.power = '观察者'\r\n              }\r\n              let flag = 0\r\n              for (let i = 0; i < this.memberList.length; i++) {\r\n                if (this.memberList[i].id === members.id) {\r\n                  flag = 1\r\n                  break\r\n                }\r\n              }\r\n              if (!flag) { this.memberList.push(members) }\r\n              // this.$message.success(res.data.message)\r\n            }\r\n          } else {\r\n             this.$message.error(res.data.message)\r\n          }\r\n           this.loading = false\r\n         })\r\n    },\r\n    invite() {\r\n      this.$axios.post('/team/invite_member', qs.stringify(this.form_invite))\r\n         .then((res) => {\r\n           if (res.data.result === 6) {\r\n             this.$message.success(res.data.message)\r\n           } else {\r\n             this.$message.error(res.data.message)\r\n           }\r\n         })\r\n    },\r\n    onRichTextEditor() {\r\n      store.toRichTextEditor && store.toRichTextEditor()\r\n    },\r\n    onChooseTemplate() {\r\n      store.toChooseTemplate && store.toChooseTemplate()\r\n    },\r\n    onSingleSuccess({ res }) {\r\n      if (res.status !== 200) {\r\n        this.$errorMsg(res.msg)\r\n      } else {\r\n        this.userModel = res.obj\r\n      }\r\n    },\r\n    beforeUpload(file) {\r\n      const size = file.size\r\n      if (size / 1024 > 500) {\r\n        this.$errorMsg('上传文件最大不能超过500K')\r\n        return false\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.button-style {\r\n  margin: 10px;\r\n  font-size: 14px;\r\n  font-weight: bold;\r\n  color: black;\r\n  height: 35px;\r\n}\r\n.spcbutton-style {\r\n  margin: 20px;\r\n  font-size: 14px;\r\n  font-weight: bold;\r\n  color: black;\r\n  height: 35px;\r\n}\r\n.projecttitle {\r\n  font-size: 45px;\r\n  margin-left: 10px;\r\n  margin-top: 10px;\r\n  margin-bottom: 20px;\r\n}\r\n.teamtitle {\r\n  font-size: 16px;\r\n  margin-left: 10px;\r\n  margin-top: 10px;\r\n  margin-bottom: 20px;\r\n}\r\n.temptablebody{\r\n  height: 500px;\r\n  width: 75%;\r\n  float: left;\r\n}\r\n.messagecss{\r\n  width: 947px;\r\n  margin: 10px;\r\n}\r\n.rightside{\r\n  float: right;\r\n  width: 23%;\r\n  margin: 10px;\r\n  height: 500px;\r\n}\r\n.rightsidefont{\r\n  font-size: 25px;\r\n  margin: 10px;\r\n}\r\n</style>\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/views/list/table-group-project.vue b/src/views/list/table-group-project.vue
--- a/src/views/list/table-group-project.vue	(revision 71b33b34279be4d6a8198c9d72a84cd5c102d8ad)
+++ b/src/views/list/table-group-project.vue	(date 1659618769923)
@@ -18,7 +18,7 @@
           <el-button
             slot="reference"
             class="button-style"
-            @click="dialogInviteVisible = true"
+            @click="dialogWordVisible = true"
           >创建文档
             <i class="el-icon-plus"></i>
           </el-button>
@@ -33,7 +33,7 @@
           <el-button
             slot="reference"
             class="button-style"
-            @click="dialogProjectVisible = true"
+            @click="dialogPageVisible = true"
           >创建原型
             <i class="el-icon-plus"></i>
           </el-button>
@@ -79,39 +79,30 @@
         </el-popover>
       </template>
     </TableHeader>
-    <el-dialog title="创建文档" :visible.sync="dialogInviteVisible">
-      <el-form :model="form_invite">
+    <el-dialog title="创建文档" :visible.sync="dialogWordVisible">
+      <el-form :model="form_word">
         <el-form-item label="文档名称" :label-width="formLabelWidth">
-          <el-input v-model="form_invite.accept_id" autocomplete="off" />
+          <el-input v-model="form_word.doc_name" autocomplete="off" />
         </el-form-item>
-      </el-form>
-      <div slot="footer" class="dialog-footer">
-        <el-button @click="dialogInviteVisible = false; form_invite.accept_id = '' ">取 消</el-button>
-        <el-button @click="Invite">确 定</el-button>
-      </div>
-    </el-dialog>
-
-    <el-dialog title="创建原型" :visible.sync="dialogProjectVisible">
-      <el-form :model="form_project">
-        <el-form-item label="原型名称" :label-width="formLabelWidth">
-          <el-input v-model="form_project.project_name" autocomplete="off" />
+        <el-form-item label="文档简介（可不填）" :label-width="formLabelWidth">
+          <el-input v-model="form_word.doc_description" autocomplete="off" />
         </el-form-item>
       </el-form>
       <div slot="footer" class="dialog-footer">
-        <el-button @click="dialogProjectVisible = false; form_project.project_name = '' ">取 消</el-button>
-        <el-button @click="CreateProject">确 定</el-button>
+        <el-button @click="dialogWordVisible = false; form_word.doc_name = '' ">取 消</el-button>
+        <el-button @click="CreateWord">确 定</el-button>
       </div>
     </el-dialog>
 
-    <el-dialog title="创建uml" :visible.sync="dialogMethodVisible">
-      <el-form :model="form_project">
-        <el-form-item label="uml名称" :label-width="formLabelWidth">
-          <el-input v-model="form_project.project_name" autocomplete="off" />
+    <el-dialog title="创建原型" :visible.sync="dialogPageVisible">
+      <el-form :model="form_page">
+        <el-form-item label="原型名称" :label-width="formLabelWidth">
+          <el-input v-model="form_page.project_name" autocomplete="off" />
         </el-form-item>
       </el-form>
       <div slot="footer" class="dialog-footer">
-        <el-button @click="dialogMethodVisible = false; form_project.project_name = '' ">取 消</el-button>
-        <el-button @click="CreateProject">确 定</el-button>
+        <el-button @click="dialogPageVisible = false; form_page.page_name = '' ">取 消</el-button>
+        <el-button @click="CreatePage">确 定</el-button>
       </div>
     </el-dialog>
     <TableBody ref="tableBody" class="temptablebody">
@@ -243,9 +234,8 @@
         </div>
         <el-divider />
         <div>
-          <span>青春是一个短暂的美梦, 当你醒来时, 它早已消失无踪</span>
+          <span>{{ project_info }}</span>
           <el-divider />
-          <span>少量的邪恶足以抵消全部高贵的品质, 害得人声名狼藉</span>
         </div>
       </template>
     </TableBody>
@@ -301,19 +291,18 @@
         user_id: getters.getUserId(state),
         team_id: Number(localStorage.getItem('team_id'))
       },
+      project_info: localStorage.getItem('project_info'),
       visible: false,
-      form_invite: {
+      form_word: {
         token: getters.getToken(state),
-        username: getters.getUserName(state),
-        send_id: getters.getUserId(state),
-        accept_id: null,
-        team_id: Number(localStorage.getItem('team_id')),
-        power: null
+        project_id: localStorage.getItem('project_id'),
+        doc_name: '',
+        doc_description: ''
       },
-      form_project: {
+      form_page: {
         token: getters.getToken(state),
         username: getters.getUserName(state),
-        project_name: '',
+        page_name: '',
         team_id: Number(localStorage.getItem('team_id'))
       },
       form_deleteMember: {
@@ -339,8 +328,8 @@
       },
       project_name: localStorage.getItem('project_name'),
       team_name: localStorage.getItem('team_name'),
-      dialogInviteVisible: false,
-      dialogProjectVisible: false,
+      dialogWordVisible: false,
+      dialogPageVisible: false,
       dialogMethodVisible: false,
       memberList: [],
       deleteMemberList: [],
@@ -378,7 +367,7 @@
     createUML() {
       router.push('/drawio')
     },
-    CreateProject() {
+    CreatePage() {
       this.$message.error('还没写接口哪！')
     },
     setPerm(item) {
@@ -518,10 +507,10 @@
            this.loading = false
          })
     },
-    invite() {
-      this.$axios.post('/team/invite_member', qs.stringify(this.form_invite))
+    CreateWord() {
+      this.$axios.post('/doc/newDoc', qs.stringify(this.form_word))
          .then((res) => {
-           if (res.data.result === 6) {
+           if (res.data.success) {
              this.$message.success(res.data.message)
            } else {
              this.$message.error(res.data.message)
