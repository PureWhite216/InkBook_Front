Index: src/layouts/sidebar/SideBar.vue
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><template>\r\n  <div\r\n    class=\"vaw-side-bar-wrapper\"\r\n    :class=\"[!state.isCollapse ? 'open-status' : 'close-status']\"\r\n  >\r\n    <transition name=\"logo\">\r\n      <Logo v-if=\"showLogo\" />\r\n    </transition>\r\n    <el-menu\r\n      ref=\"elMenu1\"\r\n      class=\"el-menu-vertical-demo\"\r\n    >\r\n      <el-menu-item index=\"1\" @click=\"toRecent\">\r\n        <i class=\"el-icon-document\" style=\"color: #3297ff\"></i>\r\n        <span slot=\"title\">最近浏览</span>\r\n      </el-menu-item>\r\n      <el-menu-item index=\"2\" @click=\"toCollect\">\r\n        <i class=\"el-icon-star-off\" style=\"color: #ffc226\"></i>\r\n        <span slot=\"title\">收藏</span>\r\n      </el-menu-item>\r\n    </el-menu>\r\n    <el-divider class=\"line\" />\r\n    <el-button\r\n      class=\"button-create\"\r\n      @click=\"createTeamStep = 0,form_createTeam.teamName = '',form_createTeam.teamInfo='', dialogCreateTeamVisible = true\"\r\n    >创建团队\r\n      <i class=\"el-icon-plus\" style=\"margin-left: 59px\"></i>\r\n    </el-button>\r\n    <el-divider class=\"line\" />\r\n    <el-button\r\n      class=\"button-create\"\r\n      @click=\"toGroup()\"\r\n    >加入的团队\r\n      <i class=\"el-icon-right\" style=\"margin-left: 40px\"></i>\r\n    </el-button>\r\n    <div class=\"text-grey\">最近查看的团队</div>\r\n    <el-menu\r\n      v-for=\"(item,index) in recentTeamList\"\r\n      :key=\"index\"\r\n      ref=\"elMenu2\"\r\n      style=\"margin-top: 10px\"\r\n      class=\"el-menu-vertical-demo\"\r\n    >\r\n      <!-- <el-menu-item index=\"1\" @click=\"recentGroup()\">\r\n        <i class=\"el-icon-right\"></i>\r\n        <span slot=\"title\">团队1</span>\r\n      </el-menu-item>\r\n      <el-menu-item index=\"2\" @click=\"recentGroup()\">\r\n        <i class=\"el-icon-right\"></i>\r\n        <span slot=\"title\">团队2</span>\r\n      </el-menu-item>\r\n      <el-menu-item index=\"3\" @click=\"recentGroup()\">\r\n        <i class=\"el-icon-right\"></i>\r\n        <span slot=\"title\">团队3</span>\r\n      </el-menu-item> -->\r\n      <el-menu-item @click=\"toGroupFile(item)\">\r\n        <i class=\"el-icon-right\"></i>\r\n        <span slot=\"title\">{{ item.team_name }}</span>\r\n      </el-menu-item>\r\n    </el-menu>\r\n    <el-button\r\n      class=\"button-create\"\r\n      @click=\"toRecover\"\r\n    >回收站\r\n    </el-button>\r\n    <div class=\"mobile-shadow\"></div>\r\n    <div>\r\n      <el-dialog\r\n        title=\"创建团队\"\r\n        :visible.sync=\"dialogCreateTeamVisible\"\r\n        width=\"45%\"\r\n        append-to-body=\"“true”\"\r\n        :before-close=\"handleClose\"\r\n      >\r\n        <el-steps :active=\"createTeamStep\" finish-status=\"success\">\r\n          <el-step title=\"步骤 1\" />\r\n          <el-step title=\"步骤 2\" />\r\n          <el-step title=\"步骤 3\" />\r\n        </el-steps>\r\n        <div v-if=\"createTeamStep === 0\">\r\n          <el-input v-model=\"form_createTeam.teamName\" size=\"medium\" placeholder=\"请输入团队名\" />\r\n          <el-button style=\"margin-top: 12px;\" @click=\"createTeamNext\">下一步</el-button>\r\n        </div>\r\n\r\n        <div v-if=\"createTeamStep === 1\">\r\n          <el-input v-model=\"form_createTeam.teamInfo\" size=\"medium\" placeholder=\"请输入团队描述\" />\r\n          <el-button style=\"margin-top: 12px;\" @click=\"createTeamNext\">下一步</el-button>\r\n        </div>\r\n\r\n        <div v-if=\"createTeamStep === 2\">\r\n          <h3> </h3>\r\n          <h3> </h3>\r\n          <el-button style=\"margin-top: 12px;\" @click=\"dialogCreateTeamVisible = false,createTeamStep = 0, createTeam()\">完成创建</el-button>\r\n        </div>\r\n        <!-- <el-button style=\"margin-top: 12px;\" @click=\"createTeamNext\">下一步</el-button> -->\r\n      </el-dialog>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport store from '../store/index'\r\nimport router from '@/router'\r\nimport qs from 'qs'\r\nimport { getters } from '@/store/modules/user.js'\r\nimport { state } from '@/store/modules/user.js'\r\n\r\nexport default {\r\n  name: 'SideBar',\r\n  props: {\r\n    showLogo: {\r\n      type: Boolean,\r\n      default: true\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      state: store.state,\r\n      dialogCreateTeamVisible: false,\r\n      createTeamStep: 0,\r\n      form_createTeam: {\r\n        token: getters.getToken(state),\r\n        user_id: getters.getUserId(state),\r\n        teamName: '',\r\n        teamInfo: ''\r\n      },\r\n      recentTeamList: []\r\n    }\r\n  },\r\n  watch: {\r\n    $route(to, from) {\r\n      if (to.meta.hiddenSiderbar) {\r\n        this.hiddenSiderbar = true\r\n      } else {\r\n        this.hiddenSiderbar = false\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    // 隐藏侧边栏\r\n    if (this.$route.meta.hiddenSiderbar) {\r\n      this.hiddenSiderbar = true\r\n    } else {\r\n      this.hiddenSiderbar = false\r\n    }\r\n  },\r\n  created() {\r\n    this.getRecentTeam()\r\n  },\r\n  methods: {\r\n    getRecentTeam() {\r\n      this.recentTeamList = []\r\n      this.$axios.get('/team/getRecentViewList', {\r\n              params: {\r\n                token: getters.getToken(state)\r\n              }\r\n            })\r\n            .then(res => {\r\n              if (res.data.success) {\r\n                for (let i = 0; i < res.data.data.length; i++) {\r\n                  const teams = {\r\n                    team_id: null,\r\n                    team_name: null,\r\n                    team_info: null\r\n                  }\r\n                  teams.team_name = res.data.data[i].team_name\r\n                  teams.team_info = res.data.data[i].team_info\r\n                  teams.team_id = res.data.data[i].team_id\r\n                  let flag = 0\r\n                  for (let i = 0; i < this.recentTeamList.length; i++) {\r\n                    if (this.recentTeamList[i].team_id === teams.team_id) {\r\n                      flag = 1\r\n                      break\r\n                    }\r\n                  }\r\n                  if (!flag) { this.recentTeamList.push(teams) }\r\n              // this.$message.success(res.data.message)\r\n            }\r\n              } else {\r\n                this.$message.error(res.data.message)\r\n              }\r\n            })\r\n    },\r\n    // recentGroup() {\r\n    //   this.$refs.elMenu1.activeIndex = null\r\n    // },\r\n    toGroupFile(item) {\r\n      localStorage.setItem('team_id', item.team_id)\r\n      localStorage.setItem('team_name', item.team_name)\r\n      localStorage.setItem('team_info', item.team_info)\r\n      this.$router.push('/redirect' + '/list/table-group-message')\r\n    },\r\n    toGroup() {\r\n      router.push('/list/table-group')\r\n      // this.$refs.elMenu1.activeIndex = null\r\n      // this.$refs.elMenu2.activeIndex = null\r\n    },\r\n    toRecent() {\r\n      // this.$refs.elMenu2.activeIndex = null\r\n      router.push('/list/table-recentvisit')\r\n    },\r\n    toCollect() {\r\n      this.$refs.elMenu2.activeIndex = null\r\n      router.push('/list/table-favorite')\r\n    },\r\n    toRecover() {\r\n      router.push('/list/table-recover')\r\n    },\r\n    createTeamNext() {\r\n      if (this.createTeamStep < 3) this.createTeamStep++\r\n    },\r\n    createTeam() {\r\n      this.$axios.post('/team/create', qs.stringify(this.form_createTeam))\r\n         .then((res) => {\r\n           if (res.data.success) {\r\n             this.$message.success(res.data.message)\r\n           } else {\r\n             this.$message.error(res.data.message)\r\n           }\r\n          this.refresh()\r\n         })\r\n    },\r\n    refresh() {\r\n      this.$router.replace({\r\n        path: '/redirect' + this.$route.path\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n@import \"../../assets/styles/variables.scss\";\r\n.text-grey {\r\n  margin-left: 20px;\r\n  margin-top: 10px;\r\n  font-size: 16px;\r\n  color: #6c6c6c;\r\n  font-family: 黑体;\r\n}\r\n.button-create {\r\n  width: 210px;\r\n  border: none;\r\n  background-color: #ffffff;\r\n  color: #000000;\r\n  font-size: 20px;\r\n  text-align: left;\r\n  font-family: 黑体;\r\n}\r\n.line {\r\n  //width: 80px;\r\n  height: 1px;\r\n  margin: 5px 5px;\r\n  transition: all $transitionTime;\r\n}\r\n.vertical-line {\r\n  position: absolute;\r\n  height: 800px;\r\n  width: 3px;\r\n  margin-left: 0px;\r\n  z-index: 999;\r\n}\r\n.open-status {\r\n  width: $menuWidth;\r\n  //box-shadow: 2px 5px 5px rgb(202, 202, 202, 0.8);\r\n  transition: all $transitionTime;\r\n}\r\n.close-status {\r\n  width: $minMenuWidth;\r\n  box-shadow: none;\r\n  transition: all $transitionTime;\r\n}\r\n.vaw-side-bar-wrapper {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  overflow-x: hidden;\r\n  height: 100%;\r\n  box-sizing: border-box;\r\n  //z-index: 999;\r\n  .vaw-menu-wrapper {\r\n    overflow-x: hidden;\r\n    color: white;\r\n  }\r\n  .scrollbar {\r\n    height: calc(100% - #{$logoHeight}) !important;\r\n  }\r\n}\r\n.is-mobile {\r\n  .open-status {\r\n    width: $menuWidth;\r\n    transform: translateX(0);\r\n    transition: transform $transitionTime;\r\n  }\r\n  .close-status {\r\n    width: $menuWidth;\r\n    transform: translateX(-$menuWidth);\r\n    transition: transform $transitionTime;\r\n    box-shadow: none;\r\n  }\r\n}\r\n</style>\r\n<style lang=\"scss\">\r\n@import \"../../assets/styles/variables.scss\";\r\n.scrollbar-wrap-class {\r\n  overflow-x: hidden !important;\r\n}\r\n.el-menu {\r\n  overflow: hidden !important;\r\n  border-right: none !important;\r\n}\r\n::v-deep {\r\n  .el-menu--collapse .el-submenu__title span {\r\n    display: none !important;\r\n  }\r\n  .el-menu--collapse .el-submenu__title .el-submenu__icon-arrow {\r\n    display: none !important;\r\n  }\r\n}\r\n</style>\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/layouts/sidebar/SideBar.vue b/src/layouts/sidebar/SideBar.vue
--- a/src/layouts/sidebar/SideBar.vue	(revision 911589fecfdc910fd3732526e4d1e5848f44515e)
+++ b/src/layouts/sidebar/SideBar.vue	(date 1659872096429)
@@ -192,15 +192,15 @@
     },
     toGroup() {
       router.push('/list/table-group')
-      // this.$refs.elMenu1.activeIndex = null
-      // this.$refs.elMenu2.activeIndex = null
+      this.$refs.elMenu1.activeIndex = null
+      this.$refs.elMenu2.activeIndex = null
     },
     toRecent() {
       // this.$refs.elMenu2.activeIndex = null
       router.push('/list/table-recentvisit')
     },
     toCollect() {
-      this.$refs.elMenu2.activeIndex = null
+      // this.$refs.elMenu2.activeIndex = null
       router.push('/list/table-favorite')
     },
     toRecover() {
