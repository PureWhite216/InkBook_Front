Index: src/views/editor/rich-text.vue
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><template>\r\n  <div class=\"main-container\">\r\n    <el-row style=\"background: #2f2f2f; min-height: 40px\">\r\n      <el-col :span=\"8\">\r\n        <el-button class=\"backbutton\" style=\"margin-left: 20px; margin-top: 3px\" @click=\"back\">\r\n          <i class=\"el-icon-back\" style=\"font-size: x-large\"></i>\r\n        </el-button>\r\n      </el-col>\r\n      <el-col :span=\"8\" style=\"text-align: center; margin-top: 12px\">\r\n        <div style=\"font-size: 16px; color: #ececec\" contenteditable=\"true\">\r\n          {{title}}\r\n        </div>\r\n        <div>\r\n          <!--          <el-button style=\"padding: 5px; background: #2f2f2f; border: 0\">-->\r\n          <!--            <i class=\"el-icon-more\" style=\"font-size: large; color: #ececec\"></i>-->\r\n          <!--          </el-button>-->\r\n        </div>\r\n      </el-col>\r\n    </el-row>\r\n    <el-card :body-style=\"{padding: '0'}\" style=\"max-width: 950px; margin: auto\">\r\n      <template #header>\r\n        <el-link :underline=\"false\">文章标题</el-link>\r\n      </template>\r\n      <el-input\r\n        v-model=\"title\"\r\n        class=\"title-input\"\r\n        placeholder=\"请输入文章标题\"\r\n      />\r\n    </el-card>\r\n    <el-card\r\n      :body-style=\"{padding: '0'}\"\r\n      class=\"margin-top-xs\"\r\n      style=\"max-width: 950px; margin: auto\"\r\n    >\r\n      <template #header>\r\n        <div class=\"flex\">\r\n          <el-link :underline=\"false\">文章内容</el-link>\r\n          <div class=\"flex-sub\"></div>\r\n          <el-button\r\n            style=\"margin-inline:10px; background: #49aaef; color: white; border: 0\"\r\n            @click=\"Save\"\r\n          >\r\n            <i class=\"el-icon-plus\"></i>\r\n            保存</el-button>\r\n          <el-button\r\n            v-if=\"!is_favorite\"\r\n            style=\"margin-inline:10px; background: orange; color: white; border: 0\"\r\n            @click=\"likeDoc\"\r\n          >\r\n            <i class=\"el-icon-star-on\"></i>\r\n            收藏</el-button>\r\n          <el-button\r\n            v-if=\"is_favorite\"\r\n            style=\"margin-inline:10px; background: orange; color: white; border: 0\"\r\n            @click=\"unlikeDoc\"\r\n          >\r\n            <i class=\"el-icon-star-off\"></i>\r\n            取消收藏</el-button>\r\n          <el-button\r\n            style=\"margin-inline:10px; background: #16dcea; color: white; border: 0\"\r\n            @click=\"exportPDF\"\r\n          >\r\n            <i class=\"el-icon-upload\"></i>\r\n            导出</el-button>\r\n          <el-button\r\n            style=\"margin-inline:10px; background: #2ce8b9; color: white; border: 0\"\r\n            @click=\"exportPDF\"\r\n          >\r\n            <i class=\"el-icon-share\"></i>\r\n            分享</el-button>\r\n        </div>\r\n      </template>\r\n      <RichTextEditor\r\n        id=\"pdfDom\"\r\n        ref=\"richTextEditor\"\r\n        v-model=\"editor\"\r\n        :height=\"1000\"\r\n      />\r\n    </el-card>\r\n    <div id=\"drag\" v-drag class=\"drag-box\">\r\n      <div class=\"boxhead\">\r\n        <i class=\"el-icon-menu\"></i>\r\n        <p>团队文档</p>\r\n      </div>\r\n      <el-tree :data=\"data\" :props=\"defaultProps\" style=\"margin-top:50px;\" @node-click=\"handleNodeClick\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport RichTextEditor from '@/components/common/RichTextEditor'\r\nimport { getters } from '@/store/modules/user.js'\r\nimport { state } from '@/store/modules/user.js'\r\nimport qs from 'qs'\r\nimport store from '@/layouts/store'\r\n\r\nexport default {\r\n  name: 'RichText',\r\n  components: { RichTextEditor },\r\n  directives: {\r\n    drag: {\r\n      // 指令的定义\r\n      bind: function(el) {\r\n        const oDiv = el // 获取当前元素\r\n        oDiv.onmousedown = (e) => {\r\n          console.log('onmousedown')\r\n          // 算出鼠标相对元素的位置\r\n          const disX = e.clientX - oDiv.offsetLeft\r\n          const disY = e.clientY - oDiv.offsetTop\r\n\r\n          document.onmousemove = (e) => {\r\n            // 用鼠标的位置减去鼠标相对元素的位置，得到元素的位置\r\n            const left = e.clientX - disX\r\n            const top = e.clientY - disY\r\n\r\n            oDiv.style.left = left + 'px'\r\n            oDiv.style.top = top + 'px'\r\n          }\r\n\r\n          document.onmouseup = (e) => {\r\n            document.onmousemove = null\r\n            document.onmouseup = null\r\n          }\r\n        }\r\n      }\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      is_favorite: localStorage.getItem('is_favorite'),\r\n      form_likeDoc: {\r\n        token: getters.getToken(state),\r\n        doc_id: null,\r\n        undo: null\r\n      },\r\n      imgUrl: '',\r\n      dialogVisible_share: false,\r\n      form: {\r\n        token: getters.getToken(state),\r\n        user_id: getters.getUserId(state),\r\n        username: getters.getUserName(state),\r\n        word_id: localStorage.getItem('word_id'),\r\n        word_content: ''\r\n      },\r\n      form1: {\r\n        token: getters.getToken(state),\r\n        user_id: getters.getUserId(state),\r\n        username: getters.getUserName(state),\r\n        word_id: localStorage.getItem('word_id'),\r\n        word_name: ''\r\n      },\r\n      form_save: {\r\n        token: getters.getToken(state),\r\n        doc_id: localStorage.getItem('doc_id'),\r\n        doc_content: ''\r\n      },\r\n      form3: {\r\n        token: getters.getToken(state),\r\n        user_id: getters.getUserId(state),\r\n        username: getters.getUserName(state),\r\n        word_id: localStorage.getItem('word_id')\r\n      },\r\n      form4: {\r\n        word_id: Number(localStorage.getItem('word_id')),\r\n        word_name: localStorage.getItem('word_name')\r\n      },\r\n      form_invite: {\r\n        token: getters.getToken(state),\r\n        user_id: getters.getUserId(state),\r\n        username: getters.getUserName(state),\r\n        accept_id: null,\r\n        word_id: localStorage.getItem('word_id')\r\n      },\r\n      form_getCooperatorList: {\r\n        token: getters.getToken(state),\r\n        user_id: getters.getUserId(state),\r\n        username: getters.getUserName(state),\r\n        word_id: localStorage.getItem('word_id')\r\n      },\r\n      form_getCommentList: {\r\n        token: getters.getToken(state),\r\n        user_id: getters.getUserId(state),\r\n        username: getters.getUserName(state),\r\n        word_id: localStorage.getItem('word_id')\r\n      },\r\n      form_addComment: {\r\n        token: getters.getToken(state),\r\n        user_id: getters.getUserId(state),\r\n        username: getters.getUserName(state),\r\n        word_id: localStorage.getItem('word_id'),\r\n        comment_content: ''\r\n      },\r\n      form_deleteCooperator: {\r\n        token: getters.getToken(state),\r\n        user_id: getters.getUserId(state),\r\n        username: getters.getUserName(state),\r\n        word_id: localStorage.getItem('word_id'),\r\n        cooperation_id: 0\r\n      },\r\n      isShow: true,\r\n      invite_visible: false,\r\n      comment_visible: false,\r\n      title: localStorage.getItem('doc_name'),\r\n      htmlContent: '',\r\n      jsonContent: '',\r\n      comment: '',\r\n      ID: '',\r\n      cooperatorList: [],\r\n      commentList: [],\r\n      loading: false,\r\n      data: [{\r\n          label: '一级 1',\r\n          children: [{\r\n            label: '二级 1-1',\r\n            children: [{\r\n              label: '三级 1-1-1'\r\n            }]\r\n          }]\r\n        }, {\r\n          label: '一级 2',\r\n          children: [{\r\n            label: '二级 2-1',\r\n            children: [{\r\n              label: '三级 2-1-1'\r\n            }]\r\n          }, {\r\n            label: '二级 2-2',\r\n            children: [{\r\n              label: '三级 2-2-1'\r\n            }]\r\n          }]\r\n        }, {\r\n          label: '一级 3',\r\n          children: [{\r\n            label: '二级 3-1',\r\n            children: [{\r\n              label: '三级 3-1-1'\r\n            }]\r\n          }, {\r\n            label: '二级 3-2',\r\n            children: [{\r\n              label: '三级 3-2-1'\r\n            }]\r\n          }]\r\n        }],\r\n        defaultProps: {\r\n          children: 'children',\r\n          label: 'label'\r\n        },\r\n      commentData: [{\r\n        name: 'ABC',\r\n        time: '2022-05-11',\r\n        comment: 'Test'\r\n      }]\r\n      // opt: {\r\n      //   errorCorrectionLevel: 'H',\r\n      //   type: 'image/jpeg',\r\n      //   quality: 0.3,\r\n      //   margin: 1\r\n      // }\r\n    }\r\n  },\r\n  created() {\r\n    store.changeDevice('mobile')\r\n    store.toggleCollapse(true)\r\n    this.getCooperatorList()\r\n    this.getCommentList()\r\n    if (localStorage.getItem('shareFlag') === 'true' && localStorage.getItem('addCooper') === 'false') {\r\n      this.isShow = false\r\n    }\r\n  },\r\n  mounted() {\r\n    store.changeDevice('mobile')\r\n    store.toggleCollapse(true)\r\n  },\r\n  beforeDestroy() {\r\n    this.exitEdit()\r\n  },\r\n  destroyed() {\r\n    store.changeDevice('pc')\r\n    store.toggleCollapse(false)\r\n  },\r\n  methods: {\r\n    handleNodeClick(data) {\r\n        console.log(data)\r\n    },\r\n    likeDoc() {\r\n      this.form_likeDoc.doc_id = localStorage.getItem('doc_id')\r\n      this.form_likeDoc.undo = false\r\n      this.$axios.post('/user/favorite', qs.stringify(this.form_likeDoc))\r\n         .then((res) => {\r\n           if (res.data.success) {\r\n            this.is_favorite = true\r\n             this.$message.success(res.data.message)\r\n           } else {\r\n             this.$message.error(res.data.message)\r\n           }\r\n         })\r\n    },\r\n    unlikeDoc() {\r\n      this.form_likeDoc.doc_id = localStorage.getItem('doc_id')\r\n      this.form_likeDoc.undo = true\r\n      this.$axios.post('/user/favorite', qs.stringify(this.form_likeDoc))\r\n         .then((res) => {\r\n           if (res.data.success) {\r\n            this.is_favorite = false\r\n             this.$message.success(res.data.message)\r\n           } else {\r\n             this.$message.error(res.data.message)\r\n           }\r\n         })\r\n    },\r\n    share() {\r\n      this.$axios.post('/worddocx/share', qs.stringify(this.form4))\r\n        .then(res => {\r\n          if (res.data.result === 0) {\r\n            alert('您的分享链接是' + 'http://124.220.205.84/#/share' + res.data.x)\r\n            localStorage.setItem('refresh', '1')\r\n          } else {\r\n            this.$message.error(res.data.message)\r\n          }\r\n        })\r\n    },\r\n    Like() {\r\n      this.$axios.post('/worddocx/user_collect_word', qs.stringify(this.form3))\r\n        .then(res => {\r\n          if (res.data.result === 4) {\r\n            this.$message.success(res.data.message)\r\n          } else {\r\n            this.$message.error(res.data.message)\r\n          }\r\n        })\r\n    },\r\n    back() {\r\n      this.$router.go(-1)\r\n    },\r\n    deleteCooperator(item) {\r\n      this.form_deleteCooperator.cooperation_id = item.id\r\n      this.$axios.post('/team/out_cooperate', qs.stringify(this.form_deleteCooperator))\r\n        .then((res) => {\r\n          if (res.data.result === 4) {\r\n              this.getCooperatorList()\r\n              this.$message.success(res.data.message)\r\n            } else {\r\n              this.$message.error(res.data.message)\r\n            }\r\n          }\r\n        )\r\n    },\r\n    addComment() {\r\n      this.$axios.post('/worddocx/user_comment_word', qs.stringify(this.form_addComment))\r\n        .then((res) => {\r\n          if (res.data.result === 3) {\r\n              this.getCommentList()\r\n              this.$message.success(res.data.message)\r\n            } else {\r\n              this.$message.error(res.data.message)\r\n            }\r\n          }\r\n        )\r\n    },\r\n    getCooperatorList() {\r\n      this.loading = true\r\n      this.cooperatorList = []\r\n      this.$axios.post('/team/get_cooperationer_list', qs.stringify(this.form_getCooperatorList))\r\n        .then((res) => {\r\n          if (res.data.result === 4) {\r\n            for (let i = 0; i < res.data.cooperation_list.length; i++) {\r\n              const cooperators = {\r\n                id: 0,\r\n                username: '',\r\n                email: ''\r\n              }\r\n              cooperators.id = res.data.cooperation_list[i].id\r\n              cooperators.username = res.data.cooperation_list[i].username\r\n              cooperators.email = res.data.cooperation_list[i].email\r\n              this.cooperatorList.push(cooperators)\r\n              // this.$message.success(res.data.message)\r\n            }\r\n            // this.$message.success(res.data.message)\r\n          }\r\n          this.loading = false\r\n        })\r\n    },\r\n    getCommentList() {\r\n      this.loading = true\r\n      this.commentList = []\r\n      this.$axios.post('/worddocx/user_get_comment_list', qs.stringify(this.form_getCommentList))\r\n        .then((res) => {\r\n          if (res.data.result === 4) {\r\n            for (let i = 0; i < res.data.word_comment_list.length; i++) {\r\n              const comments = {\r\n                id: 0,\r\n                username: '',\r\n                time: '',\r\n                content: ''\r\n              }\r\n              comments.id = res.data.word_comment_list[i].comment_id\r\n              comments.username = res.data.word_comment_list[i].comment_username\r\n              comments.time = res.data.word_comment_list[i].comment_time\r\n              comments.content = res.data.word_comment_list[i].comment_content\r\n              this.commentList.push(comments)\r\n            }\r\n            // this.$message.success(res.data.message)\r\n          }\r\n          this.loading = false\r\n        })\r\n    },\r\n    addCooperator() {\r\n      this.$axios.post('/team/send_cooperate_inviter', qs.stringify(this.form_invite))\r\n        .then((res) => {\r\n          if (res.data.result === 5) {\r\n              this.getCooperatorList()\r\n              this.$message.success(res.data.message)\r\n            } else {\r\n              this.$message.error(res.data.message)\r\n            }\r\n          }\r\n        )\r\n    },\r\n    exportPDF() {\r\n      this.getPdf('pdfDom', this.title)\r\n    },\r\n    Save() {\r\n      this.form_save.doc_content = this.$refs.richTextEditor.getJsonContent().slice(7, -1)\r\n        this.$axios.post('/doc/save', qs.stringify(this.form_save))\r\n          .then((res) => {\r\n              if (res.data.success) {\r\n                this.$message.success(res.data.message)\r\n              } else {\r\n                this.$message.error(res.data.message)\r\n              }\r\n            }\r\n          )\r\n    },\r\n    exitEdit() {\r\n      this.form.word_content = this.$refs.richTextEditor.getJsonContent().slice(7, -1)\r\n      if (localStorage.getItem('shareFlag') === 'true') {\r\n        this.$axios.post('/worddocx/user_out_edit_cooperation_word', qs.stringify(this.form))\r\n          .then((res) => {\r\n              if (res.data.result === 4) {\r\n                this.$message.success(res.data.message)\r\n                localStorage.setItem('enable', 'true')\r\n                localStorage.setItem('shareFlag', 'false')\r\n              } else {\r\n                this.$message.error(res.data.message)\r\n              }\r\n            }\r\n          )\r\n        localStorage.setItem('shareFlag', 'false')\r\n      } else {\r\n        this.$axios.post('/worddocx/user_out_edit_word', qs.stringify(this.form))\r\n          .then((res) => {\r\n              if (res.data.result === 3) {\r\n                this.$message.success(res.data.message)\r\n                localStorage.setItem('enable', 'true')\r\n              } else {\r\n                this.$message.error(res.data.message)\r\n              }\r\n            }\r\n          )\r\n        this.form1.word_name = this.title\r\n        this.$axios.post('/worddocx/user_rename_word', qs.stringify(this.form1))\r\n      }\r\n    },\r\n    getHtmlContent() {\r\n      this.htmlContent = this.$refs.richTextEditor.getHtmlContent()\r\n    },\r\n    getJsonContent() {\r\n      console.log(localStorage.getItem('flag'))\r\n      console.log(JSON.parse(localStorage.getItem('user_word_content')))\r\n      this.jsonContent = this.$refs.richTextEditor.getJsonContent()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n::v-deep .title {\r\n  color: #2c2c2c;\r\n  background-color: #2c2c2c;\r\n}\r\n.backbutton {\r\n  color: white;\r\n  background: #2c2c2c;\r\n  height: 30px;\r\n  border: 0;\r\n  margin-top: 5px;\r\n  padding: 5px;\r\n}\r\n.backbutton:hover {\r\n  color: white;\r\n  background: #000000;\r\n  height: 35px;\r\n}\r\n.backbutton:focus {\r\n  color: white;\r\n  background: #000000;\r\n  height: 35px;\r\n}\r\n\r\n.title-input {\r\n  ::v-deep .el-input__inner {\r\n    border: none !important;\r\n  }\r\n}\r\n::v-deep .ql-container.ql-snow {\r\n  border: none;\r\n}\r\n::v-deep .ql-toolbar.ql-snow {\r\n  border: none;\r\n  border-bottom: 1px solid #ccc;\r\n}\r\n::v-deep .ql-editor.ql-blank::before {\r\n  color: #afb4bd;\r\n  font-size: 14px;\r\n  font-style: normal;\r\n}\r\n.theme-dark .priview-content {\r\n  background: #5a5a5a;\r\n  color: #fff;\r\n}\r\n.priview-content {\r\n  background: #fff;\r\n  color: #333;\r\n}\r\n\r\n.drag-box {\r\n  position: absolute;\r\n  top: 100px;\r\n  left: 100px;\r\n  width: 240px;\r\n  height: 600px;\r\n  background: #ffffff;\r\n  border-radius: 5px;\r\n  box-shadow: 0px 4px 12px rgba(0, 0, 0, .15);\r\n}\r\n.boxhead {\r\n  position: absolute;\r\n  top: 0px;\r\n  left: 0px;\r\n  width: 240px;\r\n  height: 40px;\r\n  background: #fffaf6;\r\n  border-radius: 5px;\r\n  box-shadow: 0px 4px 4px rgba(0, 0, 0, .1);\r\n  font-size: 18px;\r\n  font-weight: bold;\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: center;\r\n  align-items: center;\r\n  color: #565656;\r\n}\r\n\r\n.layer-panel {\r\n  width: 220px;\r\n  height: 460px;\r\n  background-color: #1d2024;\r\n  position: fixed;\r\n  right: 252px;\r\n  top: 60px;\r\n  box-shadow: 0 0 6px rgba($color: #000000, $alpha: 0.1);\r\n  color: #fff;\r\n  border-radius: 4px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  font-size: 14px;\r\n  user-select: none;\r\n  z-index: 1001;\r\n  .header {\r\n    height: 30px;\r\n    display: flex;\r\n    align-items: center;\r\n    line-height: 30px;\r\n    box-sizing: border-box;\r\n    padding-left: 10px;\r\n    .title {\r\n      height: 30px;\r\n      flex: 1;\r\n      cursor: move;\r\n    }\r\n    i {\r\n      cursor: pointer;\r\n      width: 30px;\r\n      text-align: center;\r\n      padding: 10px 0;\r\n    }\r\n  }\r\n  .content {\r\n    width: 100%;\r\n    flex: 1;\r\n    /* overflow-y: scroll; */\r\n    background-color: #1d2024;\r\n    .draggable-container {\r\n      height: 100%;\r\n    }\r\n    .scroll-container {\r\n      height: 100%;\r\n      ::v-deep .el-scrollbar__wrap {\r\n        overflow-x: hidden;\r\n        height: 430px;\r\n      }\r\n    }\r\n  }\r\n  .panel-item.selected {\r\n    background-color: #404955;\r\n    color: #fff;\r\n    border-left-color: #358dd9;\r\n  }\r\n}\r\n</style>\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/views/editor/rich-text.vue b/src/views/editor/rich-text.vue
--- a/src/views/editor/rich-text.vue	(revision 263acd8df2e8dda6ef45761577b3d324bfc6ed10)
+++ b/src/views/editor/rich-text.vue	(date 1660051322678)
@@ -8,7 +8,7 @@
       </el-col>
       <el-col :span="8" style="text-align: center; margin-top: 12px">
         <div style="font-size: 16px; color: #ececec" contenteditable="true">
-          {{title}}
+          {{ title }}
         </div>
         <div>
           <!--          <el-button style="padding: 5px; background: #2f2f2f; border: 0">-->
@@ -82,7 +82,12 @@
         <i class="el-icon-menu"></i>
         <p>团队文档</p>
       </div>
-      <el-tree :data="data" :props="defaultProps" style="margin-top:50px;" @node-click="handleNodeClick" />
+      <el-tree
+        :data="data"
+        :props="{label: 'dir_name'}"
+        style="margin-top:50px;"
+        @node-click="handleNodeClick"
+      />
     </div>
   </div>
 </template>
@@ -197,6 +202,11 @@
         word_id: localStorage.getItem('word_id'),
         cooperation_id: 0
       },
+      form_getTeam: {
+        token: getters.getToken(state),
+        user_id: getters.getUserId(state),
+        teamId: Number(localStorage.getItem('team_id'))
+      },
       isShow: true,
       invite_visible: false,
       comment_visible: false,
@@ -208,50 +218,7 @@
       cooperatorList: [],
       commentList: [],
       loading: false,
-      data: [{
-          label: '一级 1',
-          children: [{
-            label: '二级 1-1',
-            children: [{
-              label: '三级 1-1-1'
-            }]
-          }]
-        }, {
-          label: '一级 2',
-          children: [{
-            label: '二级 2-1',
-            children: [{
-              label: '三级 2-1-1'
-            }]
-          }, {
-            label: '二级 2-2',
-            children: [{
-              label: '三级 2-2-1'
-            }]
-          }]
-        }, {
-          label: '一级 3',
-          children: [{
-            label: '二级 3-1',
-            children: [{
-              label: '三级 3-1-1'
-            }]
-          }, {
-            label: '二级 3-2',
-            children: [{
-              label: '三级 3-2-1'
-            }]
-          }]
-        }],
-        defaultProps: {
-          children: 'children',
-          label: 'label'
-        },
-      commentData: [{
-        name: 'ABC',
-        time: '2022-05-11',
-        comment: 'Test'
-      }]
+      data: []
       // opt: {
       //   errorCorrectionLevel: 'H',
       //   type: 'image/jpeg',
@@ -261,6 +228,8 @@
     }
   },
   created() {
+    this.getDoc()
+    console.log(this.data)
     store.changeDevice('mobile')
     store.toggleCollapse(true)
     this.getCooperatorList()
@@ -281,6 +250,26 @@
     store.toggleCollapse(false)
   },
   methods: {
+    getDoc() {
+      this.$axios.post('/team/getTeam', qs.stringify(this.form_getTeam))
+        .then(res => {
+          if (res.data.success) {
+            this.$axios.get('/doc/walkDir', {
+              params: {
+                token: getters.getToken(state),
+                folder_id: res.data.data[0].root_id
+              }
+            })
+              .then(res => {
+                if (res.data.success) {
+                  this.data = res.data.data
+                } else {
+                  this.$message.error(res.data.message)
+                }
+              })
+          }
+        })
+    },
     handleNodeClick(data) {
         console.log(data)
     },
Index: src/views/list/table-group-message.vue
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><template>\r\n  <div class=\"main-container\">\r\n    <TableHeader :can-collapsed=\"false\">\r\n      <template slot=\"left\">\r\n        <el-button\r\n          slot=\"reference\"\r\n          class=\"back-button\"\r\n          float=\"left\"\r\n          @click=\"toProjectlist()\"\r\n        >\r\n          <i class=\"el-icon-back\"></i>\r\n        </el-button>\r\n        <p id=\"teamName\" class=\"teamtitle\" v-text=\"team_name\">\r\n          team_name\r\n        </p>\r\n      </template>\r\n      <template slot=\"right\">\r\n        <el-popover\r\n          v-model=\"visible\"\r\n          placement=\"top\"\r\n          width=\"350\"\r\n        >\r\n          <el-button\r\n            slot=\"reference\"\r\n            class=\"button-style\"\r\n            style=\"border-color: #ffd45c\"\r\n            @click=\"dialogInviteVisible = true\"\r\n          >邀请成员\r\n            <i class=\"el-icon-user\"></i>\r\n          </el-button>\r\n        </el-popover>\r\n\r\n        <el-popover\r\n          v-model=\"visible\"\r\n          placement=\"top\"\r\n          width=\"350\"\r\n          trigger=\"click\"\r\n        >\r\n          <el-button\r\n            slot=\"reference\"\r\n            class=\"button-style\"\r\n            style=\"border-color: #57b1ff\"\r\n            @click=\"form_createProject.project_name = '', form_createProject.project_info = '', dialogCreateProjectVisible = true\"\r\n          >创建新项目\r\n            <i class=\"el-icon-plus\"></i>\r\n          </el-button>\r\n        </el-popover>\r\n\r\n        <el-popover\r\n          v-model=\"visible\"\r\n          placement=\"top\"\r\n          width=\"350\"\r\n        >\r\n          <el-button\r\n            slot=\"reference\"\r\n            class=\"button-style\"\r\n          ><el-dropdown trigger=\"click\" @command=\"onCommad\">\r\n            <div class=\"action-wrapper\" style=\"font-size: 16px ;font-weight: bold\">\r\n              <i class=\"el-icon-setting\"></i>\r\n              设置\r\n            </div>\r\n            <el-dropdown-menu slot=\"dropdown\">\r\n              <el-dropdown-item icon=\"el-icon-edit-outline\" command=\"personalCenter\">\r\n                <el-button type=\"text\" @click=\"dialogRenameVisible = true\">团队重命名</el-button>\r\n              </el-dropdown-item>\r\n              <el-dropdown-item icon=\"el-icon-edit-outline\" command=\"personalCenter\">\r\n                <el-button type=\"text\" @click=\"quitTeam\">退出团队</el-button>\r\n              </el-dropdown-item>\r\n              <el-dropdown-item icon=\"el-icon-switch-button\" command=\"logout\">\r\n                <el-button type=\"text\" style=\"color: red\" @click=\"deleteTeam\">删除团队</el-button>\r\n              </el-dropdown-item>\r\n            </el-dropdown-menu>\r\n          </el-dropdown>\r\n          </el-button>\r\n        </el-popover>\r\n      </template>\r\n    </TableHeader>\r\n    <el-dialog title=\"邀请成员\" :visible.sync=\"dialogInviteVisible\">\r\n      <el-form :model=\"form_invite\">\r\n        <el-form-item label=\"成员邮箱\" :label-width=\"formLabelWidth\">\r\n          <el-input v-model=\"form_invite.email\" autocomplete=\"off\" />\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogInviteVisible = false; form_invite.email = '' \">取 消</el-button>\r\n        <el-button @click=\"invite(),dialogInviteVisible = false\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n    <el-dialog title=\"团队重命名\" :visible.sync=\"dialogRenameVisible\">\r\n      <el-form :model=\"form_rename\">\r\n        <el-form-item label=\"新的团队名称\" :label-width=\"formLabelWidth\">\r\n          <el-input v-model=\"form_rename.teamName\" autocomplete=\"off\" />\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogRenameVisible = false; form_rename.teamName = '' \">取 消</el-button>\r\n        <el-button @click=\"Rename\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n    <el-dialog title=\"创建新项目\" :visible.sync=\"dialogCreateProjectVisible\">\r\n      <el-form :model=\"form_project\">\r\n        <el-form-item label=\"项目名称\" :label-width=\"formLabelWidth\">\r\n          <el-input v-model=\"form_createProject.project_name\" autocomplete=\"off\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"项目简介(可不填)\" :label-width=\"formLabelWidth\">\r\n          <el-input v-model=\"form_createProject.project_info\" autocomplete=\"off\" />\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogCreateProjectVisible = false; form_createProject.project_name = '' \">取 消</el-button>\r\n        <el-button @click=\"createProject(), dialogCreateProjectVisible = false\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n    <el-dialog title=\"修改项目信息\" :visible.sync=\"dialogUpdateProjectVisible\">\r\n      <el-form :model=\"form_project\">\r\n        <el-form-item label=\"项目新名称\" :label-width=\"formLabelWidth\">\r\n          <el-input v-model=\"form_updateProject.project_name\" autocomplete=\"off\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"项目新简介（可不填）\" :label-width=\"formLabelWidth\">\r\n          <el-input v-model=\"form_updateProject.project_info\" autocomplete=\"off\" />\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogUpdateProjectVisible = false; form_updateProject.project_name = '' \">取 消</el-button>\r\n        <el-button @click=\"updateProject(), dialogUpdateProjectVisible = false\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n    <el-dialog title=\"创建团队文件\" :visible.sync=\"dialogCreateDoc\">\r\n      <el-form :model=\"form_createDoc\">\r\n        <el-form-item label=\"文档名称\" :label-width=\"formLabelWidth\">\r\n          <el-input v-model=\"form_createDoc.doc_name\" autocomplete=\"off\" />\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogCreateDoc = false; form_createDoc.doc_name = '' \">取 消</el-button>\r\n        <el-button @click=\"CreateDoc(), dialogCreateDoc = false\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n    <el-dialog title=\"创建文档目录\" :visible.sync=\"dialogCreateDir\">\r\n      <el-form :model=\"form_createDir\">\r\n        <el-form-item label=\"目录名称\" :label-width=\"formLabelWidth\">\r\n          <el-input v-model=\"form_createDir.dict_name\" autocomplete=\"off\" />\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogCreateDir = false; form_createDir.dict_name = '' \">取 消</el-button>\r\n        <el-button @click=\"CreateDir(), dialogCreateDir = false\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n    <el-dialog title=\"设置权限\" :visible.sync=\"dialogPerm\" style=\"width: 1000px; margin: auto;\">\r\n      <el-form :model=\"form_power\">\r\n        <el-select v-model=\"form_power.userPerm\" placeholder=\"请选择\" autocomplete=\"off\">\r\n          <el-option\r\n            v-for=\"item in options\"\r\n            :key=\"item.value\"\r\n            :label=\"item.label\"\r\n            :value=\"item.value\"\r\n          />\r\n        </el-select>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogPerm = false; form_power.userPerm = '' \">取 消</el-button>\r\n        <el-button @click=\"givePower\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n    <TableBody ref=\"tableBody\" class=\"temptablebody\">\r\n      <template>\r\n        <el-tabs :tab-position=\"top\" style=\"height: 200px;\" class=\"messagecss\">\r\n          <el-tab-pane>\r\n            <span slot=\"label\" class=\"fontClass\" style=\"font-size: large; color: #2c2c2c\">项目</span>\r\n            <el-table\r\n              ref=\"table\"\r\n              v-loading=\"tableloading\"\r\n              class=\"table-custom\"\r\n              :data=\"projectList\"\r\n              :header-cell-style=\"tableConfig.headerCellStyle\"\r\n              :size=\"tableConfig.size\"\r\n              :cell-style=\"tableConfig.cellStyle\"\r\n              @row-dblclick=\"handleCurrentChange\"\r\n            >\r\n              <el-table-column\r\n                width=\"45\"\r\n              />\r\n              <el-table-column\r\n                align=\"center\"\r\n                label=\"名称\"\r\n                prop=\"project_name\"\r\n                width=\"300px\"\r\n              />\r\n              <el-table-column\r\n                align=\"center\"\r\n                label=\"简介\"\r\n                prop=\"project_info\"\r\n                width=\"400px\"\r\n              />\r\n              <el-table-column\r\n                align=\"center\"\r\n                label=\"操作\"\r\n                width=\"100\"\r\n              >\r\n                <template slot-scope=\"scope\">\r\n                  <el-button\r\n                    slot=\"reference\"\r\n                    class=\"morebutton\"\r\n                  >\r\n                    <el-dropdown trigger=\"click\" @command=\"onCommad\">\r\n                      <div class=\"action-wrapper\" style=\"font-size: 16px ;font-weight: bold\">\r\n                        <span class=\"nick-name el-dropdown-link\">\r\n                          <i class=\"el-icon-more\"></i>\r\n                        </span>\r\n                      </div>\r\n                      <el-dropdown-menu slot=\"dropdown\">\r\n                        <el-dropdown-item icon=\"el-icon-edit-outline\" command=\"personalCenter\">\r\n                          <el-button type=\"text\" @click=\"form_updateProject.project_id = scope.row.project_id, form_updateProject.project_name = scope.row.project_name, form_updateProject.project_info = scope.row.project_info,dialogUpdateProjectVisible = true\">修改项目信息</el-button>\r\n                        </el-dropdown-item>\r\n                        <el-dropdown-item icon=\"el-icon-edit-outline\" command=\"logout\">\r\n                          <el-button type=\"text\" @click=\"copyProject(scope.row)\">创建项目副本</el-button>\r\n                        </el-dropdown-item>\r\n                        <el-dropdown-item icon=\"el-icon-switch-button\" command=\"logout\">\r\n                          <el-button type=\"text\" @click=\"deprecateProjectItem(scope.row)\">弃置项目</el-button>\r\n                        </el-dropdown-item>\r\n                      </el-dropdown-menu>\r\n                    </el-dropdown>\r\n                  </el-button>\r\n                </template>\r\n              </el-table-column>\r\n            </el-table>\r\n          </el-tab-pane>\r\n          <el-tab-pane>\r\n            <span slot=\"label\" class=\"fontClass\" style=\"font-size: large; color: #2c2c2c\">成员</span>\r\n            <el-table\r\n              ref=\"table\"\r\n              v-loading=\"loading\"\r\n              :data=\"memberList\"\r\n              :header-cell-style=\"tableConfig.headerCellStyle\"\r\n              :size=\"tableConfig.size\"\r\n              :cell-style=\"tableConfig.cellStyle\"\r\n            >\r\n              <el-table-column\r\n                width=\"45\"\r\n              />\r\n              <el-table-column\r\n                align=\"center\"\r\n                label=\"名称\"\r\n                prop=\"username\"\r\n                width=\"200px\"\r\n              />\r\n              <el-table-column\r\n                align=\"center\"\r\n                label=\"真实姓名\"\r\n                prop=\"real_name\"\r\n                width=\"200px\"\r\n              />\r\n              <el-table-column\r\n                align=\"center\"\r\n                label=\"电子邮箱\"\r\n                prop=\"email\"\r\n                width=\"250px\"\r\n              />\r\n              <el-table-column\r\n                align=\"center\"\r\n                label=\"身份\"\r\n                prop=\"user_perm\"\r\n                width=\"150px\"\r\n              />\r\n              <el-table-column\r\n                align=\"center\"\r\n                label=\"操作\"\r\n                width=\"100\"\r\n              >\r\n                <template slot-scope=\"scope\">\r\n                  <el-button\r\n                    slot=\"reference\"\r\n                    class=\"spcbutton-style\"\r\n                  >\r\n                    <el-dropdown trigger=\"click\" @command=\"onCommad\">\r\n                      <div class=\"action-wrapper\">\r\n                        <span class=\"nick-name el-dropdown-link\">\r\n                          <i class=\"el-icon-more\"></i>\r\n                        </span>\r\n                      </div>\r\n                      <el-dropdown-menu slot=\"dropdown\">\r\n                        <el-dropdown-item icon=\"el-icon-circle-check\" command=\"personalCenter\">\r\n                          <el-button type=\"text\" @click=\"form_power.memberId = scope.row.user_id, form_power.userPerm = scope.row.user_perm, dialogPerm = true\">赋予管理员权限</el-button>\r\n                        </el-dropdown-item>\r\n                        <el-dropdown-item icon=\"el-icon-close\" command=\"logout\">\r\n                          <el-button type=\"text\" @click=\"deleteMemberItem(scope.row)\">移出团队</el-button>\r\n                        </el-dropdown-item>\r\n                      </el-dropdown-menu>\r\n                    </el-dropdown>\r\n                  </el-button>\r\n                </template>\r\n              </el-table-column>\r\n            </el-table>\r\n          </el-tab-pane>\r\n          <el-tab-pane>\r\n            <span slot=\"label\" class=\"fontClass\" style=\"font-size: large; color: #2c2c2c\">文档中心</span>\r\n            <el-table\r\n              ref=\"table\"\r\n              v-loading=\"loading\"\r\n              :data=\"tableData\"\r\n              :header-cell-style=\"tableConfig.headerCellStyle\"\r\n              :size=\"tableConfig.size\"\r\n              :cell-style=\"tableConfig.cellStyle\"\r\n              lazy\r\n              row-key=\"dir_id\"\r\n              :expand-row-keys=\"expands\"\r\n              :tree-props=\"{children: 'children', hasChildren: 'hasChildren'}\"\r\n              @row-dblclick=\"toDocEditor\"\r\n            >\r\n              <el-table-column\r\n                align=\"center\"\r\n                label=\"名称\"\r\n                prop=\"dir_name\"\r\n                width=\"450px\"\r\n              />\r\n              <el-table-column\r\n                align=\"center\"\r\n                label=\"创建时间\"\r\n                prop=\"dir_createTime\"\r\n                width=\"200px\"\r\n              />\r\n              <el-table-column\r\n                align=\"center\"\r\n                label=\"操作\"\r\n                width=\"260\"\r\n              >\r\n                <template slot-scope=\"scope\">\r\n                  <el-button\r\n                    v-if=\"scope.row.type === 'dir' && scope.row.dir_id !== prj_root_id && scope.row.dir_parent_id !== prj_root_id\"\r\n                    slot=\"reference\"\r\n                    class=\"morebutton\"\r\n                  ><el-dropdown trigger=\"click\">\r\n                    <div class=\"action-wrapper\" style=\"font-size: 16px ;font-weight: bold\">\r\n                      <i class=\"el-icon-more\"></i>\r\n                    </div>\r\n                    <el-dropdown-menu slot=\"dropdown\">\r\n                      <el-dropdown-item icon=\"el-icon-edit-outline\" command=\"logout\">\r\n                        <el-button type=\"text\" style=\"color: green\" @click=\"form_createDoc.dest_folder_id = scope.row.dir_id, dialogCreateDoc = true\">创建团队文件</el-button>\r\n                      </el-dropdown-item>\r\n                      <el-dropdown-item icon=\"el-icon-edit-outline\" command=\"logout\">\r\n                        <el-button type=\"text\" style=\"color: green\" @click=\"form_createDir.dest_folder_id = scope.row.dir_id, dialogCreateDir = true\">创建文件夹</el-button>\r\n                      </el-dropdown-item>\r\n                    </el-dropdown-menu>\r\n                  </el-dropdown>\r\n                  </el-button>\r\n                </template>\r\n              </el-table-column>\r\n            </el-table>\r\n          </el-tab-pane>\r\n          <el-tab-pane>\r\n            <span slot=\"label\" class=\"fontClass\" style=\"font-size: large; color: #2c2c2c\">回收站</span>\r\n            <el-table\r\n              ref=\"table\"\r\n              v-loading=\"tableloading\"\r\n              class=\"table-custom\"\r\n              :data=\"deprecatedList\"\r\n              :header-cell-style=\"tableConfig.headerCellStyle\"\r\n              :size=\"tableConfig.size\"\r\n              :cell-style=\"tableConfig.cellStyle\"\r\n              @row-dblclick=\"handleCurrentChange\"\r\n            >\r\n              <el-table-column\r\n                width=\"45\"\r\n              />\r\n              <el-table-column\r\n                align=\"center\"\r\n                label=\"名称\"\r\n                prop=\"project_name\"\r\n                width=\"300px\"\r\n              />\r\n              <el-table-column\r\n                align=\"center\"\r\n                label=\"简介\"\r\n                prop=\"project_info\"\r\n                width=\"400px\"\r\n              />\r\n              <el-table-column\r\n                align=\"center\"\r\n                label=\"操作\"\r\n                width=\"100\"\r\n              >\r\n                <template slot-scope=\"scope\">\r\n                  <el-button\r\n                    slot=\"reference\"\r\n                    class=\"morebutton\"\r\n                  >\r\n                    <el-dropdown trigger=\"click\" @command=\"onCommad\">\r\n                      <div class=\"action-wrapper\" style=\"font-size: 16px ;font-weight: bold\">\r\n                        <span class=\"nick-name el-dropdown-link\">\r\n                          <i class=\"el-icon-more\"></i>\r\n                        </span>\r\n                      </div>\r\n                      <el-dropdown-menu slot=\"dropdown\">\r\n                        <el-dropdown-item icon=\"el-icon-edit-outline\" command=\"personalCenter\">\r\n                          <el-button type=\"text\" @click=\"form_updateProject.project_id = scope.row.project_id, form_updateProject.project_name = scope.row.project_name, form_updateProject.project_info = scope.row.project_info,dialogUpdateProjectVisible = true\">修改项目信息</el-button>\r\n                        </el-dropdown-item>\r\n                        <el-dropdown-item icon=\"el-icon-edit-outline\" command=\"logout\">\r\n                          <el-button type=\"text\" @click=\"unDeprecateProject(scope.row)\">恢复项目</el-button>\r\n                        </el-dropdown-item>\r\n                        <el-dropdown-item icon=\"el-icon-switch-button\" command=\"logout\">\r\n                          <el-button type=\"text\" @click=\"deleteProjectItem(scope.row)\">删除项目</el-button>\r\n                        </el-dropdown-item>\r\n                      </el-dropdown-menu>\r\n                    </el-dropdown>\r\n                  </el-button>\r\n                </template>\r\n              </el-table-column>\r\n            </el-table>\r\n          </el-tab-pane>\r\n        </el-tabs>\r\n      </template>\r\n    </TableBody>\r\n    <TableBody ref=\"tableBody\" class=\"rightside\">\r\n      <template>\r\n        <div class=\"rightsidefont\">\r\n          About\r\n        </div>\r\n        <el-divider />\r\n        <div>\r\n          <span>{{ teamInfo }}</span>\r\n          <el-divider />\r\n        </div>\r\n      </template>\r\n    </TableBody>\r\n\r\n    <!--    <TableFooter-->\r\n    <!--      :page-size=\"pageModel.pageSize\"-->\r\n    <!--      :total-size=\"pageModel.totalSize\"-->\r\n    <!--      @pageSizeChanged=\"pageSizeChanged\"-->\r\n    <!--      @currentChanged=\"currentChanged\"-->\r\n    <!--      @onRefresh=\"doRefresh\"-->\r\n    <!--    />-->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport TableMixin, { PageModelMixin } from '@/mixins/TableMixin'\r\nimport {\r\n  GetDataMixin,\r\n  AddItemMixin,\r\n  DeleteItemsMixin,\r\n  UpdateItemMixin,\r\n  RefreshActionMixin\r\n} from '@/mixins/ActionMixin'\r\nimport SingleUpload from '@/components/common/SingleUpload.vue'\r\nimport BaseForm from '@/components/common/BaseForm.vue'\r\nimport draggable from '@/directive/draggable'\r\nimport store from '@/layouts/store'\r\nimport qs from 'qs'\r\nimport { getters } from '@/store/modules/user.js'\r\nimport { state } from '@/store/modules/user.js'\r\nexport default {\r\n  name: 'TableGroupMember',\r\n  // eslint-disable-next-line vue/no-unused-components\r\n  components: { SingleUpload, BaseForm },\r\n  directives: { draggable },\r\n  mixins: [\r\n    TableMixin,\r\n    PageModelMixin,\r\n    GetDataMixin,\r\n    AddItemMixin,\r\n    DeleteItemsMixin,\r\n    UpdateItemMixin,\r\n    RefreshActionMixin\r\n  ],\r\n  data() {\r\n    return {\r\n      expands: ['2'],\r\n      tableData: [],\r\n      visible_setPerm: true,\r\n      loading: false,\r\n      dialogRenameVisible: false,\r\n      dialogPerm: false,\r\n      dialogCreateDoc: false,\r\n      dialogCreateDir: false,\r\n      form_createDir: {\r\n        token: getters.getToken(state),\r\n        dict_name: '',\r\n        dest_folder_id: ''\r\n      },\r\n      form_createDoc: {\r\n        token: getters.getToken(state),\r\n        doc_name: '',\r\n        team_id: localStorage.getItem('team_id'),\r\n        dest_folder_id: ''\r\n      },\r\n      form_member: {\r\n        token: getters.getToken(state),\r\n        user_id: getters.getUserId(state),\r\n        teamId: localStorage.getItem('team_id')\r\n      },\r\n      teamInfo: localStorage.getItem('team_info'),\r\n      form_power: {\r\n        token: getters.getToken(state),\r\n        user_id: getters.getUserId(state),\r\n        teamId: localStorage.getItem('team_id'),\r\n        memberId: '',\r\n        userPerm: ''\r\n      },\r\n      form_getProjectList: {\r\n        token: getters.getToken(state),\r\n        user_id: getters.getUserId(state),\r\n        team_id: localStorage.getItem('team_id')\r\n      },\r\n      form_createProject: {\r\n        token: getters.getToken(state),\r\n        user_id: getters.getUserId(state),\r\n        team_id: localStorage.getItem('team_id'),\r\n        project_name: '',\r\n        project_info: ''\r\n      },\r\n      form_deleteProject: {\r\n        token: getters.getToken(state),\r\n        user_id: getters.getUserId(state),\r\n        project_id: 0\r\n      },\r\n      form_copyProject: {\r\n        token: getters.getToken(state),\r\n        user_id: getters.getUserId(state),\r\n        team_id: localStorage.getItem('team_id'),\r\n        project_id: 0\r\n      },\r\n      form_deprecateProject: {\r\n        token: getters.getToken(state),\r\n        user_id: getters.getUserId(state),\r\n        project_id: 0,\r\n        deprecated: true\r\n      },\r\n      form_unDeprecateProject: {\r\n        token: getters.getToken(state),\r\n        user_id: getters.getUserId(state),\r\n        project_id: 0,\r\n        deprecated: false\r\n      },\r\n      form_updateProject: {\r\n        token: getters.getToken(state),\r\n        user_id: getters.getUserId(state),\r\n        project_id: 0,\r\n        project_name: '',\r\n        project_info: ''\r\n      },\r\n      form_getTeam: {\r\n        token: getters.getToken(state),\r\n        user_id: getters.getUserId(state),\r\n        teamId: Number(localStorage.getItem('team_id'))\r\n      },\r\n      visible: false,\r\n      form_invite: {\r\n        token: getters.getToken(state),\r\n        user_id: getters.getUserId(state),\r\n        teamId: Number(localStorage.getItem('team_id')),\r\n        email: ''\r\n      },\r\n      form_project: {\r\n        token: getters.getToken(state),\r\n        username: getters.getUserName(state),\r\n        project_name: '',\r\n        team_id: Number(localStorage.getItem('team_id'))\r\n      },\r\n      form_deleteMember: {\r\n        token: getters.getToken(state),\r\n        username: getters.getUserName(state),\r\n        user_id: getters.getUserId(state),\r\n        teamId: Number(localStorage.getItem('team_id')),\r\n        memberId: null\r\n      },\r\n      form_rename: {\r\n        token: getters.getToken(state),\r\n        user_id: getters.getUserId(state),\r\n        teamId: Number(localStorage.getItem('team_id')),\r\n        teamName: ''\r\n      },\r\n      form_quitTeam: {\r\n        token: getters.getToken(state),\r\n        user_id: getters.getUserId(state),\r\n        teamId: Number(localStorage.getItem('team_id'))\r\n      },\r\n      form_setPerm: {\r\n        token: getters.getToken(state),\r\n        username: getters.getUserName(state),\r\n        user_id: getters.getUserId(state),\r\n        team_id: Number(localStorage.getItem('team_id')),\r\n        member_id: 0,\r\n        perm: null\r\n      },\r\n      team_name: localStorage.getItem('team_name'),\r\n      prj_root_id: localStorage.getItem('prj_root_id'),\r\n      dialogInviteVisible: false,\r\n      dialogCreateProjectVisible: false,\r\n      dialogUpdateProjectVisible: false,\r\n      dialogMethodVisible: false,\r\n      memberList: [],\r\n      projectList: [],\r\n      deprecatedList: [],\r\n      deleteMemberList: [],\r\n      userModel: {\r\n        address: '',\r\n        avatar: '',\r\n        gender: 1,\r\n        id: 1,\r\n        lastLoginIp: '',\r\n        lastLoginTime: '',\r\n        nickName: '',\r\n        status: 0,\r\n        vip: 1\r\n      },\r\n      options: [{\r\n          value: '0',\r\n          label: '超管'\r\n        }, {\r\n          value: '1',\r\n          label: '管理员'\r\n        }, {\r\n          value: '2',\r\n          label: '成员'\r\n        }\r\n      ],\r\n      value: ''\r\n    }\r\n  },\r\n  created() {\r\n    localStorage.setItem('flag', 'user')\r\n    this.getMemberList()\r\n    this.getProjectList()\r\n    this.getDoc()\r\n  },\r\n  methods: {\r\n    CreateDoc() {\r\n      this.$axios.post('/doc/newDoc', qs.stringify(this.form_createDoc))\r\n      .then(res => {\r\n        if (res.data.success) {\r\n          this.$message.success(res.data.message)\r\n        } else {\r\n          this.$message.error(res.data.message)\r\n        }\r\n        this.getDoc()\r\n      })\r\n    },\r\n    CreateDir() {\r\n      this.$axios.post('/doc/mkdir', qs.stringify(this.form_createDir))\r\n        .then(res => {\r\n          if (res.data.success) {\r\n            this.$message.success(res.data.message)\r\n          } else {\r\n            this.$message.error(res.data.message)\r\n          }\r\n          this.getDoc()\r\n        })\r\n    },\r\n    getDoc() {\r\n      this.$axios.post('/team/getTeam', qs.stringify(this.form_getTeam))\r\n      .then(res => {\r\n        if (res.data.success) {\r\n          this.$axios.get('/doc/walkDir', {\r\n            params: {\r\n              token: getters.getToken(state),\r\n              folder_id: res.data.data[0].root_id\r\n            }\r\n          })\r\n          .then(res => {\r\n            if (res.data.success) {\r\n              this.tableData = res.data.data\r\n            } else {\r\n              this.$message.error(res.data.message)\r\n            }\r\n          })\r\n        }\r\n      })\r\n    },\r\n    copyProject(item) {\r\n      this.form_copyProject.project_id = item.project_id\r\n      this.$axios.post('/project/copy', qs.stringify(this.form_copyProject))\r\n      .then(res => {\r\n        if (res.data.success) {\r\n          this.$message.success(res.data.message)\r\n          this.getProjectList()\r\n        } else {\r\n          this.$message.error(res.data.message)\r\n        }\r\n      })\r\n    },\r\n    toDocEditor(val) {\r\n      if (val.type === 'documentation') {\r\n        localStorage.setItem('doc_id', val.doc_id)\r\n        localStorage.setItem('doc_name', val.doc_name)\r\n        this.$axios.get('/doc/getDocInfo', {\r\n          params: {\r\n            token: getters.getToken(state),\r\n            doc_id: localStorage.getItem('doc_id')\r\n          }\r\n        })\r\n          .then(res => {\r\n            if (res.data.success) {\r\n              localStorage.setItem('doc_content', res.data.data[0].doc_content)\r\n            } else {\r\n              this.$message.error(res.data.message)\r\n            }\r\n          })\r\n        this.$router.push('/editor/rich-text')\r\n      }\r\n    },\r\n    unDeprecateProject(item) {\r\n      this.form_unDeprecateProject.project_id = item.project_id\r\n      this.$axios.post('/project/deprecate', qs.stringify(this.form_unDeprecateProject))\r\n        .then((res) => {\r\n          // console.log(5)\r\n          if (res.data.success) {\r\n            this.$message.success(res.data.message)\r\n          } else {\r\n            this.$message.error(res.data.message)\r\n          }\r\n          this.getProjectList()\r\n        })\r\n    },\r\n    deprecateProjectItem(item) {\r\n      this.$confirm('此操作将使您弃置此项目使其进入回收站' + ', 是否继续?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        this.deprecateProject(item)\r\n      }).catch(() => {\r\n        this.$message({\r\n          type: 'info',\r\n          message: '已取消操作'\r\n        })\r\n      })\r\n    },\r\n    deprecateProject(item) {\r\n      this.form_deprecateProject.project_id = item.project_id\r\n      this.$axios.post('/project/deprecate', qs.stringify(this.form_deprecateProject))\r\n        .then((res) => {\r\n          // console.log(5)\r\n          if (res.data.success) {\r\n            this.$message.success(res.data.message)\r\n          } else {\r\n            this.$message.error(res.data.message)\r\n          }\r\n          this.getProjectList()\r\n        })\r\n    },\r\n    givePower() {\r\n      // /*if (this.form_power.userPerm === '管理员') {\r\n      //   this.form_power.userPerm = 1\r\n      // } else if (this.form_power.userPerm === '成员') {\r\n      //   this.form_power.userPerm = 2\r\n      // } else {\r\n      //   this.form_power.userPerm = 0\r\n      // }*/\r\n      this.$axios.post('/team/setPerm', qs.stringify(this.form_power))\r\n      .then(res => {\r\n        if (res.data.success) {\r\n          this.$message.success(res.data.message)\r\n        } else {\r\n          this.$message.error(res.data.message)\r\n        }\r\n        this.dialogPerm = false\r\n        this.getMemberList()\r\n      })\r\n    },\r\n    getProjectList() {\r\n      this.loading = true\r\n      this.projectList = []\r\n      this.deprecatedList = []\r\n      this.$axios.post('/project/getProjectList', qs.stringify(this.form_getProjectList))\r\n        .then((res) => {\r\n          if (res.data.success) {\r\n            for (let i = 0; i < res.data.data.length; i++) {\r\n              const projects = {\r\n                project_id: 0,\r\n                team_id: 0,\r\n                project_name: '',\r\n                project_info: ''\r\n              }\r\n              projects.project_id = res.data.data[i].project_id\r\n              projects.team_id = res.data.data[i].team_id\r\n              projects.project_name = res.data.data[i].project_name\r\n              projects.project_info = res.data.data[i].project_info\r\n              if (!res.data.data[i].deprecated) { this.projectList.push(projects) } else { this.deprecatedList.push(projects) }\r\n              // this.$message.success(res.data.message)\r\n            }\r\n          } else {\r\n             // this.$message.error(res.data.message)\r\n          }\r\n           this.loading = false\r\n         })\r\n    },\r\n    getMemberList() {\r\n      this.loading = true\r\n      this.memberList = []\r\n      this.$axios.post('/team/getMemberList', qs.stringify(this.form_member))\r\n        .then((res) => {\r\n          if (res.data.success) {\r\n            for (let i = 0; i < res.data.data.length; i++) {\r\n              const members = {\r\n                user_id: 0,\r\n                username: '',\r\n                email: '',\r\n                user_perm: '',\r\n                real_name: ''\r\n              }\r\n              members.user_id = res.data.data[i].user_id\r\n              members.real_name = res.data.data[i].real_name\r\n              members.email = res.data.data[i].email\r\n              members.username = res.data.data[i].username\r\n              if (res.data.data[i].user_perm === 0) {\r\n                members.user_perm = '超管'\r\n              } else if (res.data.data[i].user_perm === 1) {\r\n                members.user_perm = '管理员'\r\n              } else if (res.data.data[i].user_perm === 2) {\r\n                members.user_perm = '成员'\r\n              }\r\n              let flag = 0\r\n              for (let i = 0; i < this.memberList.length; i++) {\r\n                if (this.memberList[i].user_id === members.user_id) {\r\n                  flag = 1\r\n                  break\r\n                }\r\n              }\r\n              if (!flag) { this.memberList.push(members) }\r\n              // this.$message.success(res.data.message)\r\n            }\r\n          } else {\r\n             this.$message.error(res.data.message)\r\n          }\r\n           this.loading = false\r\n         })\r\n    },\r\n    createProject() {\r\n      this.$axios.post('/project/create', qs.stringify(this.form_createProject))\r\n        .then((res) => {\r\n          // console.log(5)\r\n          if (res.data.success) {\r\n            this.$message.success(res.data.message)\r\n          } else {\r\n            this.$message.error(res.data.message)\r\n          }\r\n          this.getProjectList()\r\n        })\r\n    },\r\n    Rename() {\r\n      this.$axios.post('/team/update', qs.stringify(this.form_rename))\r\n      .then(res => {\r\n          if (res.data.success === true) {\r\n            this.team_name = this.form_rename.teamName\r\n            this.$message.success(res.data.message)\r\n            this.dialogRenameVisible = false\r\n            this.form_rename.teamName = ''\r\n          } else {\r\n            this.$message.error(res.data.message)\r\n            this.dialogRenameVisible = false\r\n            this.form_rename.teamName = ''\r\n          }\r\n      })\r\n    },\r\n    setPerm(item) {\r\n      this.form_setPerm.member_id = item.id\r\n      this.$axios.post('/team/set_perm', qs.stringify(this.form_setPerm))\r\n        .then((res) => {\r\n          // console.log(5)\r\n          if (res.data.result === 7) {\r\n            this.$message.success(res.data.message)\r\n          } else {\r\n            this.$message.error(res.data.message)\r\n          }\r\n          this.getMemberList()\r\n        })\r\n    },\r\n    deleteProjectItem(item) {\r\n      this.$confirm('此操作将使您删除此项目' + ', 是否继续?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n    }).then(() => {\r\n      this.deleteProject(item)\r\n      }).catch(() => {\r\n        this.$message({\r\n          type: 'info',\r\n          message: '已取消操作'\r\n        })\r\n      })\r\n    },\r\n    deleteProject(item) {\r\n      this.form_deleteProject.project_id = item.project_id\r\n      this.$axios.post('/project/delete', qs.stringify(this.form_deleteProject))\r\n        .then((res) => {\r\n          // console.log(5)\r\n          if (res.data.success) {\r\n            this.$message.success(res.data.message)\r\n          } else {\r\n            this.$message.error(res.data.message)\r\n          }\r\n          this.getProjectList()\r\n        })\r\n    },\r\n    updateProject() {\r\n      // this.form_updateProject.project_id = item.project_id\r\n      this.$axios.post('/project/update', qs.stringify(this.form_updateProject))\r\n        .then((res) => {\r\n          // console.log(5)\r\n          if (res.data.success) {\r\n            this.$message.success(res.data.message)\r\n          } else {\r\n            this.$message.error(res.data.message)\r\n          }\r\n          this.getProjectList()\r\n        })\r\n    },\r\n    deleteItem(item) {\r\n      if (item.id === this.form_deleteMember.user_id) {\r\n        this.$confirm('此操作将使您退出此团队' + ', 是否继续?', '提示', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n      }).then(() => {\r\n        this.quitTeam()\r\n        }).catch(() => {\r\n          this.$message({\r\n            type: 'info',\r\n            message: '已取消操作'\r\n          })\r\n        })\r\n      } else {\r\n        this.$confirm('此操作将踢出用户成员' + item.username + ', 是否继续?', '提示', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n      }).then(() => {\r\n        this.deleteMember(item)\r\n        }).catch(() => {\r\n          this.$message({\r\n            type: 'info',\r\n            message: '已取消操作'\r\n          })\r\n        })\r\n      }\r\n    },\r\n    handleSelectionChange(items) {\r\n      this.deleteMemberList = items\r\n    },\r\n    deleteMultiItem() {\r\n      this.$confirm('此操作将踢出您选中的所有成员, 是否继续?', '提示', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n      }).then(() => {\r\n        for (let i = 0; i < this.deleteMemberList.length; i++) {\r\n          this.deleteMember(this.deleteMemberList[i])\r\n        }\r\n        this.getMemberList()\r\n        }).catch(() => {\r\n          this.$message({\r\n            type: 'info',\r\n            message: '已取消踢出'\r\n          })\r\n        })\r\n    },\r\n    deleteMemberItem(item) {\r\n      this.$confirm('此操作将踢出用户成员' + item.username + ', 是否继续?', '提示', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n      }).then(() => {\r\n        this.deleteMember(item)\r\n        }).catch(() => {\r\n          this.$message({\r\n            type: 'info',\r\n            message: '已取消操作'\r\n          })\r\n        })\r\n    },\r\n    deleteMember(item) {\r\n      this.form_deleteMember.memberId = item.user_id\r\n      // console.log(item.id)\r\n      this.$axios.post('/team/deleteMember', qs.stringify(this.form_deleteMember))\r\n        .then((res) => {\r\n          // console.log(5)\r\n          if (res.data.success) {\r\n            this.$message.success(res.data.message)\r\n          } else {\r\n            this.$message.error(res.data.message)\r\n          }\r\n          this.getMemberList()\r\n        })\r\n    },\r\n    quitTeam() {\r\n      this.$confirm('此操作将使您退出该团队' + ', 是否继续?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n    }).then(() => {\r\n      this.$axios.post('/team/quitTeam', qs.stringify(this.form_quitTeam))\r\n        .then((res) => {\r\n          if (res.data.success) {\r\n            this.$message.success(res.data.message)\r\n            this.onGroupSpace()\r\n          } else {\r\n            this.$message.error(res.data.message)\r\n          }\r\n        })\r\n      }).catch(() => {\r\n        this.$message({\r\n          type: 'info',\r\n          message: '已取消操作'\r\n        })\r\n      })\r\n    },\r\n    deleteTeam() {\r\n      this.$confirm('此操作将使您删除该团队' + ', 是否继续?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n    }).then(() => {\r\n      this.$axios.post('/team/delete', qs.stringify(this.form_quitTeam))\r\n        .then((res) => {\r\n          if (res.data.success) {\r\n            this.$message.success(res.data.message)\r\n            this.onGroupSpace()\r\n          } else {\r\n            this.$message.error(res.data.message)\r\n          }\r\n        })\r\n      }).catch(() => {\r\n        this.$message({\r\n          type: 'info',\r\n          message: '已取消操作'\r\n        })\r\n      })\r\n    },\r\n    handleCurrentChange(val) {\r\n      this.toProject(val)\r\n    },\r\n    onGroupSpace() {\r\n      store.toGroupSpace && store.toGroupSpace()\r\n    },\r\n    clearList() {\r\n      this.memberList = []\r\n    },\r\n    toProject(item) {\r\n      localStorage.setItem('project_id', item.project_id)\r\n      localStorage.setItem('project_name', item.project_name)\r\n      localStorage.setItem('project_info', item.project_info)\r\n      this.$router.push('/list/table-group-project')\r\n    },\r\n    toProjectlist() {\r\n      this.$router.replace('/list/table-group')\r\n    },\r\n    invite() {\r\n      this.$axios.post('/team/inviteMember', qs.stringify(this.form_invite))\r\n         .then((res) => {\r\n           if (res.data.success) {\r\n             this.$message.success(res.data.message)\r\n           } else {\r\n             this.$message.error(res.data.message)\r\n           }\r\n           this.getMemberList()\r\n         })\r\n    },\r\n    onRichTextEditor() {\r\n      store.toRichTextEditor && store.toRichTextEditor()\r\n    },\r\n    onChooseTemplate() {\r\n      store.toChooseTemplate && store.toChooseTemplate()\r\n    },\r\n    onSingleSuccess({ res }) {\r\n      if (res.status !== 200) {\r\n        this.$errorMsg(res.msg)\r\n      } else {\r\n        this.userModel = res.obj\r\n      }\r\n    },\r\n    beforeUpload(file) {\r\n      const size = file.size\r\n      if (size / 1024 > 500) {\r\n        this.$errorMsg('上传文件最大不能超过500K')\r\n        return false\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.morebutton {\r\n  padding: 5px;\r\n  border: 0;\r\n}\r\n.button-style {\r\n  margin: 10px;\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  border-width: 3px;\r\n  color: black;\r\n  height: 45px;\r\n}\r\n.back-button{\r\n  margin-top: 20px;\r\n  font-size: 26px;\r\n  font-weight: bold;\r\n  color: black;\r\n  padding: 5px;\r\n  border: 0;\r\n}\r\n.table-custom {\r\n  width: 1000px;\r\n}\r\n.teamtitle {\r\n  font-size: 50px;\r\n  margin-left: 10px;\r\n  margin-top: 10px;\r\n  margin-bottom: 20px;\r\n  float: right;\r\n}\r\n.temptablebody{\r\n  height: 500px;\r\n  width: 75%;\r\n  float: left;\r\n}\r\n.messagecss{\r\n  width: 947px;\r\n  margin: 10px;\r\n}\r\n.rightside{\r\n  float: right;\r\n  width: 23%;\r\n  margin: 10px;\r\n  height: 500px;\r\n}\r\n.rightsidefont{\r\n  font-size: 25px;\r\n  margin: 10px;\r\n}\r\n</style>\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/views/list/table-group-message.vue b/src/views/list/table-group-message.vue
--- a/src/views/list/table-group-message.vue	(revision 263acd8df2e8dda6ef45761577b3d324bfc6ed10)
+++ b/src/views/list/table-group-message.vue	(date 1660050751232)
@@ -302,6 +302,7 @@
               :header-cell-style="tableConfig.headerCellStyle"
               :size="tableConfig.size"
               :cell-style="tableConfig.cellStyle"
+              :default-expand-all="true"
               lazy
               row-key="dir_id"
               :expand-row-keys="expands"
Index: src/views/list/table-group-project.vue
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><template>\r\n  <div class=\"main-container\">\r\n    <TableHeader :can-collapsed=\"false\">\r\n      <template slot=\"left\">\r\n        <el-button\r\n          slot=\"reference\"\r\n          class=\"back-button\"\r\n          float=\"left\"\r\n          @click=\"toProject()\"\r\n        >\r\n          <i class=\"el-icon-back\"></i>\r\n        </el-button>\r\n        <div style=\"float: right\">\r\n          <div id=\"projectName\" class=\"projecttitle\">\r\n            {{ project_name }}\r\n          </div>\r\n          <div id=\"teamName\" class=\"teamtitle\">\r\n            该项目属于团队{{ team_name }}\r\n          </div>\r\n        </div>\r\n      </template>\r\n\r\n      <template slot=\"right\">\r\n        <el-popover\r\n          v-model=\"visible\"\r\n          placement=\"top\"\r\n          width=\"350\"\r\n        >\r\n          <el-button\r\n            slot=\"reference\"\r\n            class=\"button-style\"\r\n            style=\"border-color: #57b1ff\"\r\n            @click=\"dialogWordVisible = true\"\r\n          >创建文档\r\n            <i class=\"el-icon-plus\"></i>\r\n          </el-button>\r\n        </el-popover>\r\n\r\n        <el-popover\r\n          v-model=\"visible\"\r\n          placement=\"top\"\r\n          width=\"350\"\r\n          trigger=\"click\"\r\n        >\r\n          <el-button\r\n            slot=\"reference\"\r\n            class=\"button-style\"\r\n            style=\"border-color: #a15aff\"\r\n            @click=\"dialogPageVisible = true\"\r\n          >创建原型\r\n            <i class=\"el-icon-plus\"></i>\r\n          </el-button>\r\n        </el-popover>\r\n\r\n        <el-popover\r\n          v-model=\"visible\"\r\n          placement=\"top\"\r\n          width=\"350\"\r\n        >\r\n          <el-button\r\n            slot=\"reference\"\r\n            class=\"button-style\"\r\n            style=\"border-color: #ffd45c\"\r\n            @click=\"createUML()\"\r\n          >创建uml\r\n            <i class=\"el-icon-plus\"></i>\r\n          </el-button>\r\n        </el-popover>\r\n\r\n        <el-popover\r\n          v-model=\"visible\"\r\n          placement=\"top\"\r\n          width=\"350\"\r\n        >\r\n          <el-button\r\n            slot=\"reference\"\r\n            class=\"button-style\"\r\n          ><el-dropdown trigger=\"click\" @command=\"onCommad\">\r\n            <div class=\"action-wrapper\" style=\"font-size: 16px ;font-weight: bold\">\r\n              <i class=\"el-icon-setting\"></i>\r\n              设置\r\n            </div>\r\n            <el-dropdown-menu slot=\"dropdown\">\r\n              <el-dropdown-item icon=\"el-icon-edit-outline\" command=\"personalCenter\">\r\n                <el-button type=\"text\" @click=\"form_updateProject.project_name = project_name, form_updateProject.project_info = project_info, dialogUpdateProjectVisible = true\">修改项目信息</el-button>\r\n              </el-dropdown-item>\r\n              <el-dropdown-item icon=\"el-icon-switch-button\" command=\"logout\">\r\n                <el-button type=\"text\" style=\"color: red\" @click=\"deleteProject\">删除项目</el-button>\r\n              </el-dropdown-item>\r\n            </el-dropdown-menu>\r\n          </el-dropdown>\r\n          </el-button>\r\n        </el-popover>\r\n      </template>\r\n    </TableHeader>\r\n\r\n    <el-dialog title=\"创建文档\" :visible.sync=\"dialogWordVisible\">\r\n      <el-form :model=\"form_word\">\r\n        <el-form-item label=\"文档名称\" :label-width=\"formLabelWidth\">\r\n          <el-input v-model=\"form_word.doc_name\" autocomplete=\"off\" />\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogWordVisible = false; form_word.doc_name = '' \">取 消</el-button>\r\n        <el-button @click=\"dialogWordVisible = false; createWord()\">确 定</el-button>\r\n      </div>\r\n      <el-row>\r\n        <el-col v-for=\"(o, index) in 2\" :key=\"o\" :span=\"8\" :offset=\"index > 0 ? 2 : 0\">\r\n          <el-card :body-style=\"{ padding: '0px' }\">\r\n            <img src=\"../../assets/work_logo.png\" class=\"image\" />\r\n            <div style=\"padding: 14px;\">\r\n              <span>模板{{ index }}</span>\r\n              <div class=\"bottom clearfix\">\r\n                <time class=\"time\">{{ currentDate }}</time>\r\n                <el-button type=\"text\" class=\"button\">操作按钮</el-button>\r\n              </div>\r\n            </div>\r\n          </el-card>\r\n        </el-col>\r\n      </el-row>\r\n    </el-dialog>\r\n\r\n    <el-dialog title=\"创建原型\" :visible.sync=\"dialogPageVisible\">\r\n      <el-form :model=\"form_page\">\r\n        <el-form-item label=\"原型名称\" :label-width=\"formLabelWidth\">\r\n          <el-input v-model=\"form_createAxure.axure_name\" autocomplete=\"off\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"原型简介（可不填）\" :label-width=\"formLabelWidth\">\r\n          <el-input v-model=\"form_createAxure.axure_info\" autocomplete=\"off\" />\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogPageVisible = false; form_page.page_name = '' \">取 消</el-button>\r\n        <el-button @click=\"createAxure(), dialogPageVisible = false\">确 定</el-button>\r\n      </div>\r\n      <el-row>\r\n        <el-col v-for=\"(o, index) in 2\" :key=\"o\" :span=\"8\" :offset=\"index > 0 ? 2 : 0\">\r\n          <el-card :body-style=\"{ padding: '0px' }\">\r\n            <img src=\"../../assets/work_logo.png\" class=\"image\" />\r\n            <div style=\"padding: 14px;\">\r\n              <span>模板{{ index }}</span>\r\n              <div class=\"bottom clearfix\">\r\n                <time class=\"time\">{{ currentDate }}</time>\r\n                <el-button type=\"text\" class=\"button\">操作按钮</el-button>\r\n              </div>\r\n            </div>\r\n          </el-card>\r\n        </el-col>\r\n      </el-row>\r\n    </el-dialog>\r\n\r\n    <el-dialog title=\"修改项目信息\" :visible.sync=\"dialogUpdateProjectVisible\">\r\n      <el-form :model=\"form_updateProject\">\r\n        <el-form-item label=\"项目新名称\" :label-width=\"formLabelWidth\">\r\n          <el-input v-model=\"form_updateProject.project_name\" autocomplete=\"off\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"项目新简介（可不填）\" :label-width=\"formLabelWidth\">\r\n          <el-input v-model=\"form_updateProject.project_info\" autocomplete=\"off\" />\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogUpdateProjectVisible = false; form_updateProject.project_name = '' \">取 消</el-button>\r\n        <el-button @click=\"updateProject(), dialogUpdateProjectVisible = false\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n\r\n    <el-dialog title=\"修改文档信息\" :visible.sync=\"dialogUpdateDocInfoVisible\">\r\n      <el-form :model=\"form_updateDocInfo\">\r\n        <el-form-item label=\"文档新名称\" :label-width=\"formLabelWidth\">\r\n          <el-input v-model=\"form_updateDocInfo.doc_name\" autocomplete=\"off\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"文档新简介（可不填）\" :label-width=\"formLabelWidth\">\r\n          <el-input v-model=\"form_updateDocInfo.doc_description\" autocomplete=\"off\" />\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogUpdateDocInfoVisible = false\">取 消</el-button>\r\n        <el-button @click=\"updateDocInfo(), dialogUpdateDocInfoVisible = false\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n\r\n    <el-dialog title=\"修改原型信息\" :visible.sync=\"dialogUpdateAxureInfoVisible\">\r\n      <el-form :model=\"form_updateDocInfo\">\r\n        <el-form-item label=\"原型新名称\" :label-width=\"formLabelWidth\">\r\n          <el-input v-model=\"form_updateAxureInfo.axure_name\" autocomplete=\"off\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"原型新简介（可不填）\" :label-width=\"formLabelWidth\">\r\n          <el-input v-model=\"form_updateAxureInfo.axure_info\" autocomplete=\"off\" />\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogUpdateAxureInfoVisible = false\">取 消</el-button>\r\n        <el-button @click=\"updateAxureInfo(), dialogUpdateAxureInfoVisible = false\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n    <TableBody ref=\"tableBody\" class=\"temptablebody\">\r\n      <template>\r\n        <el-tabs :tab-position=\"top\" style=\"height: 200px;\" class=\"messagecss\">\r\n          <el-tab-pane>\r\n            <span slot=\"label\" class=\"fontClass\" style=\"font-size: large; color: #2c2c2c\">文档</span>\r\n            <el-table\r\n              ref=\"table\"\r\n              v-loading=\"tableloading\"\r\n              class=\"table-custom\"\r\n              :data=\"docList\"\r\n              :header-cell-style=\"tableConfig.headerCellStyle\"\r\n              :cell-style=\"tableConfig.cellStyle\"\r\n              :size=\"tableConfig.size\"\r\n              @row-dblclick=\"toDocEditor\"\r\n            >\r\n              <el-table-column\r\n                width=\"20\"\r\n              />\r\n              <el-table-column\r\n                align=\"center\"\r\n                label=\"名称\"\r\n                prop=\"doc_name\"\r\n                width=\"375px\"\r\n                sortable\r\n              />\r\n              <el-table-column\r\n                align=\"center\"\r\n                label=\"更新时间\"\r\n                prop=\"last_edit_time\"\r\n                width=\"250px\"\r\n                sortable\r\n              />\r\n              <el-table-column\r\n                align=\"center\"\r\n                label=\"创建者\"\r\n                prop=\"creator_name\"\r\n                width=\"200px\"\r\n              />\r\n              <el-table-column\r\n                align=\"center\"\r\n                label=\"操作\"\r\n                width=\"100\"\r\n              >\r\n                <template slot-scope=\"scope\">\r\n                  <el-dropdown trigger=\"click\" @command=\"onCommad\">\r\n                    <div class=\"action-wrapper\">\r\n                      <span class=\"nick-name el-dropdown-link\">\r\n                        <i class=\"el-icon-more\"></i>\r\n                      </span>\r\n                    </div>\r\n                    <el-dropdown-menu slot=\"dropdown\">\r\n                      <el-dropdown-item v-if=\"!scope.row.is_favorite\" icon=\"el-icon-star-on\" command=\"personalCenter\">\r\n                        <el-button type=\"text\" @click=\"likeDoc(scope.row)\">收藏</el-button>\r\n                      </el-dropdown-item>\r\n                      <el-dropdown-item v-if=\"scope.row.is_favorite\" icon=\"el-icon-star-off\" command=\"personalCenter\">\r\n                        <el-button type=\"text\" @click=\"unlikeDoc(scope.row)\">取消收藏</el-button>\r\n                      </el-dropdown-item>\r\n                      <el-dropdown-item icon=\"el-icon-edit-outline\" command=\"personalCenter\">\r\n                        <el-button type=\"text\" @click=\"form_updateDocInfo.doc_id = scope.row.doc_id, dialogUpdateDocInfoVisible = true\">重命名</el-button>\r\n                      </el-dropdown-item>\r\n                      <el-dropdown-item icon=\"el-icon-switch-button\" command=\"logout\">\r\n                        <el-button type=\"text\" @click=\"form_deleteDoc.doc_id = scope.row.doc_id, deleteDoc()\">删除文件</el-button>\r\n                      </el-dropdown-item>\r\n                    </el-dropdown-menu>\r\n                  </el-dropdown>\r\n                </template>\r\n              </el-table-column>\r\n            </el-table>\r\n          </el-tab-pane>\r\n          <el-tab-pane>\r\n            <span slot=\"label\" class=\"fontClass\" style=\"font-size: large; color: #2c2c2c\">原型</span>\r\n            <el-table\r\n              ref=\"table\"\r\n              v-loading=\"loading\"\r\n              class=\"table-custom\"\r\n              :data=\"axureList\"\r\n              :header-cell-style=\"tableConfig.headerCellStyle\"\r\n              :size=\"tableConfig.size\"\r\n              :cell-style=\"tableConfig.cellStyle\"\r\n              @row-dblclick=\"toAxureEditor\"\r\n            >\r\n              <el-table-column\r\n                width=\"20\"\r\n              />\r\n              <el-table-column\r\n                align=\"center\"\r\n                label=\"名称\"\r\n                prop=\"axure_name\"\r\n                width=\"375px\"\r\n              />\r\n              <el-table-column\r\n                align=\"center\"\r\n                label=\"更新时间\"\r\n                prop=\"last_edit\"\r\n                width=\"250px\"\r\n              />\r\n              <el-table-column\r\n                align=\"center\"\r\n                label=\"创建者\"\r\n                prop=\"create_user\"\r\n                width=\"200px\"\r\n              />\r\n              <el-table-column\r\n                align=\"center\"\r\n                label=\"操作\"\r\n                width=\"100\"\r\n              >\r\n                <template slot-scope=\"scope\">\r\n                  <el-dropdown trigger=\"click\" @command=\"onCommad\">\r\n                    <div class=\"action-wrapper\">\r\n                      <span class=\"nick-name el-dropdown-link\">\r\n                        <i class=\"el-icon-more\"></i>\r\n                      </span>\r\n                    </div>\r\n                    <el-dropdown-menu slot=\"dropdown\">\r\n                      <el-dropdown-item v-if=\"!scope.row.isFavorite\" icon=\"el-icon-star-on\" command=\"personalCenter\">\r\n                        <el-button type=\"text\" @click=\"likeAxure(scope.row)\">收藏</el-button>\r\n                      </el-dropdown-item>\r\n                      <el-dropdown-item v-if=\"scope.row.isFavorite\" icon=\"el-icon-star-off\" command=\"personalCenter\">\r\n                        <el-button type=\"text\" @click=\"unlikeAxure(scope.row)\">取消收藏</el-button>\r\n                      </el-dropdown-item>\r\n                      <el-dropdown-item icon=\"el-icon-edit-outline\" command=\"personalCenter\">\r\n                        <el-button type=\"text\" @click=\"form_updateAxureInfo.axure_id = scope.row.axure_id, dialogUpdateAxureInfoVisible = true\">重命名</el-button>\r\n                      </el-dropdown-item>\r\n                      <el-dropdown-item icon=\"el-icon-switch-button\" command=\"logout\">\r\n                        <el-button type=\"text\" @click=\"deleteAxure(scope.row)\">删除原型</el-button>\r\n                      </el-dropdown-item>\r\n                    </el-dropdown-menu>\r\n                  </el-dropdown>\r\n                </template>\r\n              </el-table-column>\r\n            </el-table>\r\n          </el-tab-pane>\r\n        </el-tabs>\r\n      </template>\r\n    </TableBody>\r\n    <TableBody ref=\"tableBody\" class=\"rightside\">\r\n      <template>\r\n        <div class=\"rightsidefont\">\r\n          About\r\n        </div>\r\n        <el-divider />\r\n        <div>\r\n          <span>{{ project_info }}</span>\r\n          <el-divider />\r\n        </div>\r\n      </template>\r\n    </TableBody>\r\n\r\n    <!--    <TableFooter-->\r\n    <!--      :page-size=\"pageModel.pageSize\"-->\r\n    <!--      :total-size=\"pageModel.totalSize\"-->\r\n    <!--      @pageSizeChanged=\"pageSizeChanged\"-->\r\n    <!--      @currentChanged=\"currentChanged\"-->\r\n    <!--      @onRefresh=\"doRefresh\"-->\r\n    <!--    />-->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport TableMixin, { PageModelMixin } from '@/mixins/TableMixin'\r\nimport {\r\n  GetDataMixin,\r\n  AddItemMixin,\r\n  DeleteItemsMixin,\r\n  UpdateItemMixin,\r\n  RefreshActionMixin\r\n} from '@/mixins/ActionMixin'\r\nimport SingleUpload from '@/components/common/SingleUpload.vue'\r\nimport BaseForm from '@/components/common/BaseForm.vue'\r\nimport draggable from '@/directive/draggable'\r\nimport store from '@/layouts/store'\r\nimport qs from 'qs'\r\n// import { mapActions, mapState } from 'poster/poster.vuex'\r\nimport { getters } from '@/store/modules/user.js'\r\nimport { state } from '@/store/modules/user.js'\r\nimport router from '@/router'\r\nexport default {\r\n  name: 'TableGroupMember',\r\n  // eslint-disable-next-line vue/no-unused-components\r\n  components: { SingleUpload, BaseForm },\r\n  directives: { draggable },\r\n  mixins: [\r\n    TableMixin,\r\n    PageModelMixin,\r\n    GetDataMixin,\r\n    AddItemMixin,\r\n    DeleteItemsMixin,\r\n    UpdateItemMixin,\r\n    RefreshActionMixin\r\n  ],\r\n  data() {\r\n    return {\r\n      visible_setPerm: true,\r\n      loading: false,\r\n      form_likeAxure: {\r\n        token: getters.getToken(state),\r\n        axure_id: null\r\n      },\r\n      form_updateAxureInfo: {\r\n        token: getters.getToken(state),\r\n        axure_id: null,\r\n        axure_name: null,\r\n        axure_info: null\r\n      },\r\n      form_likeDoc: {\r\n        token: getters.getToken(state),\r\n        doc_id: null,\r\n        undo: null\r\n      },\r\n      form_deleteAxure: {\r\n        token: getters.getToken(state),\r\n        axure_id: null\r\n      },\r\n      form_createAxure: {\r\n        token: getters.getToken(state),\r\n        axure_name: null,\r\n        axure_info: null,\r\n        project_id: localStorage.getItem('project_id')\r\n      },\r\n      form_getAxureList: {\r\n        token: getters.getToken(state),\r\n        project_id: localStorage.getItem('project_id')\r\n      },\r\n      form_deleteDoc: {\r\n        token: getters.getToken(state),\r\n        doc_id: null,\r\n        recycle: false\r\n      },\r\n      form_updateDocInfo: {\r\n        token: getters.getToken(state),\r\n        doc_id: null,\r\n        doc_name: null,\r\n        doc_description: null\r\n      },\r\n      form_deleteProject: {\r\n        token: getters.getToken(state),\r\n        user_id: getters.getUserId(state),\r\n        project_id: localStorage.getItem('project_id')\r\n      },\r\n      form_updateProject: {\r\n        token: getters.getToken(state),\r\n        user_id: getters.getUserId(state),\r\n        project_id: localStorage.getItem('project_id'),\r\n        project_name: '',\r\n        project_info: ''\r\n      },\r\n      form_member: {\r\n        token: getters.getToken(state),\r\n        username: getters.getUserName(state),\r\n        user_id: getters.getUserId(state),\r\n        team_id: Number(localStorage.getItem('team_id'))\r\n      },\r\n      project_info: localStorage.getItem('project_info'),\r\n      visible: false,\r\n      form_word: {\r\n        token: getters.getToken(state),\r\n        project_id: localStorage.getItem('project_id'),\r\n        doc_name: '',\r\n        doc_description: ''\r\n      },\r\n      form_page: {\r\n        token: getters.getToken(state),\r\n        username: getters.getUserName(state),\r\n        page_name: '',\r\n        team_id: Number(localStorage.getItem('team_id'))\r\n      },\r\n      form_getDocInfo: {\r\n        token: getters.getToken(state),\r\n        doc_id: localStorage.getItem('doc_id')\r\n      },\r\n      form_deleteMember: {\r\n        token: getters.getToken(state),\r\n        username: getters.getUserName(state),\r\n        user_id: getters.getUserId(state),\r\n        team_id: Number(localStorage.getItem('team_id')),\r\n        deleted_id: null\r\n      },\r\n      form_quitTeam: {\r\n        token: getters.getToken(state),\r\n        username: getters.getUserName(state),\r\n        user_id: getters.getUserId(state),\r\n        team_id: Number(localStorage.getItem('team_id'))\r\n      },\r\n      form_setPerm: {\r\n        token: getters.getToken(state),\r\n        username: getters.getUserName(state),\r\n        user_id: getters.getUserId(state),\r\n        team_id: Number(localStorage.getItem('team_id')),\r\n        member_id: 0,\r\n        perm: null\r\n      },\r\n      project_name: localStorage.getItem('project_name'),\r\n      team_name: localStorage.getItem('team_name'),\r\n      dialogWordVisible: false,\r\n      dialogPageVisible: false,\r\n      dialogMethodVisible: false,\r\n      dialogUpdateProjectVisible: false,\r\n      dialogUpdateDocInfoVisible: false,\r\n      dialogUpdateAxureInfoVisible: false,\r\n      axureList: [],\r\n      deleteMemberList: [],\r\n      docList: [],\r\n      powerOptions: [\r\n        {\r\n          value: 1,\r\n          label: '队长'\r\n        },\r\n        {\r\n          value: 2,\r\n          label: '开发者'\r\n        },\r\n        {\r\n          value: 3,\r\n          label: '观察者'\r\n        }\r\n      ],\r\n      userModel: {\r\n        address: '',\r\n        avatar: '',\r\n        gender: 1,\r\n        id: 1,\r\n        lastLoginIp: '',\r\n        lastLoginTime: '',\r\n        nickName: '',\r\n        status: 0,\r\n        vip: 1\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.getDocList()\r\n    this.getAxureList()\r\n    localStorage.setItem('flag', 'user')\r\n    localStorage.setItem('enable', 'true')\r\n  },\r\n  methods: {\r\n    likeAxure(item) {\r\n      this.form_likeAxure.axure_id = item.axure_id\r\n      item.isFavorite = true\r\n      this.$axios.post('/axure/addFavoriteAxure', qs.stringify(this.form_likeAxure))\r\n         .then((res) => {\r\n           if (res.data.success) {\r\n             this.$message.success(res.data.message)\r\n           } else {\r\n             this.$message.error(res.data.message)\r\n           }\r\n         })\r\n    },\r\n    unlikeAxure(item) {\r\n      this.form_likeAxure.axure_id = item.axure_id\r\n      item.isFavorite = false\r\n      this.$axios.post('/axure/deleteFavoriteAxure', qs.stringify(this.form_likeAxure))\r\n         .then((res) => {\r\n           if (res.data.success) {\r\n             this.$message.success(res.data.message)\r\n           } else {\r\n             this.$message.error(res.data.message)\r\n           }\r\n         })\r\n    },\r\n    updateAxureInfo() {\r\n      this.$axios.post('/axure/updateInfo', qs.stringify(this.form_updateAxureInfo))\r\n        .then((res) => {\r\n          // console.log(5)\r\n          if (res.data.success) {\r\n            this.$message.success(res.data.message)\r\n            this.getAxureList()\r\n          } else {\r\n            this.$message.error(res.data.message)\r\n          }\r\n        })\r\n    },\r\n    likeDoc(item) {\r\n      this.form_likeDoc.doc_id = item.doc_id\r\n      this.form_likeDoc.undo = false\r\n      item.is_favorite = true\r\n      this.$axios.post('/user/favorite', qs.stringify(this.form_likeDoc))\r\n         .then((res) => {\r\n           if (res.data.success) {\r\n             this.$message.success(res.data.message)\r\n            //  this.getDocList()\r\n           } else {\r\n             this.$message.error(res.data.message)\r\n           }\r\n         })\r\n    },\r\n    unlikeDoc(item) {\r\n      this.form_likeDoc.doc_id = item.doc_id\r\n      this.form_likeDoc.undo = true\r\n      item.is_favorite = false\r\n      this.$axios.post('/user/favorite', qs.stringify(this.form_likeDoc))\r\n         .then((res) => {\r\n           if (res.data.success) {\r\n             this.$message.success(res.data.message)\r\n            //  this.getDocList()\r\n           } else {\r\n             this.$message.error(res.data.message)\r\n           }\r\n         })\r\n    },\r\n    deleteAxure(item) {\r\n      this.$confirm('此操作将使您删除此原型' + ', 是否继续?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n      this.form_deleteAxure.axure_id = item.axure_id\r\n      this.$axios.post('/axure/delete', qs.stringify(this.form_deleteAxure))\r\n        .then((res) => {\r\n          // console.log(5)\r\n          if (res.data.success) {\r\n            this.$message.success(res.data.message)\r\n            this.getAxureList()\r\n          } else {\r\n            this.$message.error(res.data.message)\r\n          }\r\n        })\r\n      }).catch(() => {\r\n        this.$message({\r\n          type: 'info',\r\n          message: '已取消操作'\r\n        })\r\n      })\r\n    },\r\n    toAxureEditor(val) {\r\n      localStorage.setItem('axure_id', val.axure_id)\r\n      localStorage.setItem('axure_name', val.axure_name)\r\n      localStorage.setItem('axure_info', val.axure_info)\r\n      localStorage.setItem('Token', getters.getToken(state))\r\n      this.$router.push('/posterEditor')\r\n    },\r\n    createAxure() {\r\n      this.$axios.post('/axure/create', qs.stringify(this.form_createAxure))\r\n         .then((res) => {\r\n           if (res.data.success) {\r\n             this.$message.success(res.data.message)\r\n             this.getAxureList()\r\n           } else {\r\n             this.$message.error(res.data.message)\r\n           }\r\n         })\r\n    },\r\n    getAxureList() {\r\n      this.loading = true\r\n      this.axureList = []\r\n      this.$axios.post('/axure/getAxureList', qs.stringify(this.form_getAxureList))\r\n        .then((res) => {\r\n          if (res.data.success) {\r\n            for (let i = 0; i < res.data.data.length; i++) {\r\n              const axures = {\r\n                axure_info: null,\r\n                axure_id: null,\r\n                project_id: null,\r\n                axure_name: null,\r\n                title: null,\r\n                config: null,\r\n                items: null,\r\n                last_edit: null,\r\n                create_user: null,\r\n                isFavorite: null\r\n              }\r\n              axures.axure_info = res.data.data[i].axure_info\r\n              axures.axure_id = res.data.data[i].axure_id\r\n              axures.project_id = res.data.data[i].project_id\r\n              axures.axure_name = res.data.data[i].axure_name\r\n              axures.title = res.data.data[i].title\r\n              axures.config = res.data.data[i].config\r\n              axures.items = res.data.data[i].items\r\n              axures.last_edit = res.data.data[i].last_edit\r\n              axures.create_user = res.data.data[i].create_user\r\n              axures.isFavorite = res.data.data[i].isFavorite === 1\r\n              let flag = 0\r\n              for (let i = 0; i < this.axureList.length; i++) {\r\n                if (this.axureList[i].axure_id === axures.axure_id) {\r\n                  flag = 1\r\n                  break\r\n                }\r\n              }\r\n              if (!flag) { this.axureList.push(axures) }\r\n              // this.$message.success(res.data.message)\r\n            }\r\n          } else {\r\n             // this.$message.error(res.data.message)\r\n          }\r\n           this.loading = false\r\n         })\r\n    },\r\n    toDocEditor(val) {\r\n      localStorage.setItem('doc_id', val.doc_id)\r\n      localStorage.setItem('doc_name', val.doc_name)\r\n      localStorage.setItem('is_favorite', val.is_favorite)\r\n      this.$axios.get('/doc/getDocInfo', {\r\n        params: {\r\n          token: getters.getToken(state),\r\n          doc_id: localStorage.getItem('doc_id')\r\n        }\r\n      })\r\n      .then(res => {\r\n        if (res.data.success) {\r\n          localStorage.setItem('doc_content', res.data.data[0].doc_content)\r\n        } else {\r\n          this.$message.error(res.data.message)\r\n        }\r\n      })\r\n      this.$router.push('/editor/rich-text')\r\n    },\r\n    deleteDoc() {\r\n      this.$confirm('此操作将使您删除此文档' + ', 是否继续?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n    }).then(() => {\r\n      this.$axios.post('/doc/deleteDoc', qs.stringify(this.form_deleteDoc))\r\n        .then((res) => {\r\n          // console.log(5)\r\n          if (res.data.success) {\r\n            this.$message.success(res.data.message)\r\n            this.getDocList()\r\n          } else {\r\n            this.$message.error(res.data.message)\r\n          }\r\n        })\r\n      }).catch(() => {\r\n        this.$message({\r\n          type: 'info',\r\n          message: '已取消操作'\r\n        })\r\n      })\r\n    },\r\n    updateDocInfo() {\r\n      this.$axios.post('/doc/updateDocInfo', qs.stringify(this.form_updateDocInfo))\r\n        .then((res) => {\r\n          // console.log(5)\r\n          if (res.data.success) {\r\n            this.$message.success(res.data.message)\r\n            this.getDocList()\r\n          } else {\r\n            this.$message.error(res.data.message)\r\n          }\r\n        })\r\n    },\r\n    deleteProject() {\r\n      this.$confirm('此操作将使您删除此项目' + ', 是否继续?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n    }).then(() => {\r\n      this.$axios.post('/project/delete', qs.stringify(this.form_deleteProject))\r\n        .then((res) => {\r\n          // console.log(5)\r\n          if (res.data.success) {\r\n            this.$message.success(res.data.message)\r\n            this.toProject()\r\n          } else {\r\n            this.$message.error(res.data.message)\r\n          }\r\n        })\r\n      }).catch(() => {\r\n        this.$message({\r\n          type: 'info',\r\n          message: '已取消操作'\r\n        })\r\n      })\r\n    },\r\n    updateProject() {\r\n      // this.form_updateProject.project_id = item.project_id\r\n      this.$axios.post('/project/update', qs.stringify(this.form_updateProject))\r\n        .then((res) => {\r\n          // console.log(5)\r\n          if (res.data.success) {\r\n            this.$message.success(res.data.message)\r\n            this.project_name = this.form_updateProject.project_name\r\n            this.project_info = this.form_updateProject.project_info\r\n            localStorage.setItem('project_name', this.project_name)\r\n            localStorage.setItem('project_info', this.project_info)\r\n          } else {\r\n            this.$message.error(res.data.message)\r\n          }\r\n        })\r\n    },\r\n    getDocList() {\r\n      this.docList = []\r\n      this.$axios.get('/doc/getDocList', {\r\n              params: {\r\n                token: getters.getToken(state),\r\n                project_id: localStorage.getItem('project_id')\r\n              }\r\n            })\r\n            .then(res => {\r\n              if (res.data.success) {\r\n                for (let i = 0; i < res.data.data.length; i++) {\r\n              const docs = {\r\n                doc_name: null,\r\n                last_edit_time: null,\r\n                project_id: null,\r\n                doc_description: null,\r\n                creator_id: null,\r\n                doc_content: null,\r\n                creator_name: null,\r\n                doc_id: null,\r\n                is_favorite: null\r\n              }\r\n              docs.doc_name = res.data.data[i].doc_name\r\n              docs.last_edit_time = res.data.data[i].last_edit_time\r\n              docs.project_id = res.data.data[i].project_id\r\n              docs.doc_description = res.data.data[i].doc_description\r\n              docs.creator_id = res.data.data[i].creator_id\r\n              docs.doc_content = res.data.data[i].doc_content\r\n              docs.creator_name = res.data.data[i].creator_name\r\n              docs.doc_id = res.data.data[i].doc_id\r\n              docs.is_favorite = res.data.data[i].is_favorite\r\n              let flag = 0\r\n              for (let i = 0; i < this.docList.length; i++) {\r\n                if (this.docList[i].doc_id === docs.doc_id) {\r\n                  flag = 1\r\n                  break\r\n                }\r\n              }\r\n              if (!flag) { this.docList.push(docs) }\r\n              // this.$message.success(res.data.message)\r\n            }\r\n              } else {\r\n                this.$message.error(res.data.message)\r\n              }\r\n            })\r\n    },\r\n    createUML() {\r\n      router.push('/drawio')\r\n      // window.open('https://www.draw.io/index.html', '_blank')\r\n      // window.open = 'https://www.draw.io/index.html'\r\n    },\r\n    CreatePage() {\r\n      this.$message.error('还没写接口哪！')\r\n    },\r\n    setPerm(item) {\r\n      this.form_setPerm.member_id = item.id\r\n      this.$axios.post('/team/set_perm', qs.stringify(this.form_setPerm))\r\n        .then((res) => {\r\n          // console.log(5)\r\n          if (res.data.result === 7) {\r\n            this.$message.success(res.data.message)\r\n          } else {\r\n            this.$message.error(res.data.message)\r\n          }\r\n          this.getMemberList()\r\n        })\r\n    },\r\n    deleteItem(item) {\r\n      if (item.id === this.form_deleteMember.user_id) {\r\n        this.$confirm('此操作将使您退出此团队' + ', 是否继续?', '提示', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n      }).then(() => {\r\n        this.quitTeam()\r\n        }).catch(() => {\r\n          this.$message({\r\n            type: 'info',\r\n            message: '已取消操作'\r\n          })\r\n        })\r\n      } else {\r\n        this.$confirm('此操作将踢出用户成员' + item.username + ', 是否继续?', '提示', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n      }).then(() => {\r\n        this.deleteMember(item)\r\n        }).catch(() => {\r\n          this.$message({\r\n            type: 'info',\r\n            message: '已取消操作'\r\n          })\r\n        })\r\n      }\r\n    },\r\n    handleSelectionChange(items) {\r\n      this.deleteMemberList = items\r\n    },\r\n    deleteMultiItem() {\r\n      this.$confirm('此操作将踢出您选中的所有成员, 是否继续?', '提示', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n      }).then(() => {\r\n        for (let i = 0; i < this.deleteMemberList.length; i++) {\r\n          this.deleteMember(this.deleteMemberList[i])\r\n        }\r\n        this.getMemberList()\r\n        }).catch(() => {\r\n          this.$message({\r\n            type: 'info',\r\n            message: '已取消踢出'\r\n          })\r\n        })\r\n    },\r\n    deleteMember(item) {\r\n      this.form_deleteMember.deleted_id = item.id\r\n      // console.log(item.id)\r\n      this.$axios.post('/team/delete_member', qs.stringify(this.form_deleteMember))\r\n        .then((res) => {\r\n          // console.log(5)\r\n          if (res.data.result === 5) {\r\n            this.$message.success(res.data.message)\r\n          } else {\r\n            this.$message.error(res.data.message)\r\n          }\r\n          this.getMemberList()\r\n        })\r\n    },\r\n    quitTeam() {\r\n      this.$axios.post('/team/quit_team', qs.stringify(this.form_quitTeam))\r\n        .then((res) => {\r\n          if (res.data.result === 5) {\r\n            this.$message.success(res.data.message)\r\n          } else {\r\n            this.$message.error(res.data.message)\r\n          }\r\n          this.onGroupSpace()\r\n        })\r\n    },\r\n    onGroupSpace() {\r\n      store.toGroupSpace && store.toGroupSpace()\r\n    },\r\n    clearList() {\r\n      this.memberList = []\r\n    },\r\n    onFile() {\r\n      this.$router.push('/list/table-group-file')\r\n    },\r\n    toProject() {\r\n      this.$router.replace('/list/table-group-message')\r\n    },\r\n    createWord() {\r\n      this.$axios.post('/doc/newDoc', qs.stringify(this.form_word))\r\n         .then((res) => {\r\n           if (res.data.success) {\r\n             this.$message.success(res.data.message)\r\n             this.getDocList()\r\n           } else {\r\n             this.$message.error(res.data.message)\r\n           }\r\n         })\r\n    },\r\n    onRichTextEditor() {\r\n      store.toRichTextEditor && store.toRichTextEditor()\r\n    },\r\n    onChooseTemplate() {\r\n      store.toChooseTemplate && store.toChooseTemplate()\r\n    },\r\n    onSingleSuccess({ res }) {\r\n      if (res.status !== 200) {\r\n        this.$errorMsg(res.msg)\r\n      } else {\r\n        this.userModel = res.obj\r\n      }\r\n    },\r\n    beforeUpload(file) {\r\n      const size = file.size\r\n      if (size / 1024 > 500) {\r\n        this.$errorMsg('上传文件最大不能超过500K')\r\n        return false\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.morebutton {\r\n  padding: 5px;\r\n  border: 0;\r\n}\r\n.button-style {\r\n  margin: 10px;\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  border-width: 3px;\r\n  color: black;\r\n  height: 45px;\r\n}\r\n.back-button{\r\n  margin-top: 20px;\r\n  font-size: 26px;\r\n  font-weight: bold;\r\n  color: black;\r\n  padding: 5px;\r\n  border: 0;\r\n}\r\n.spcbutton-style {\r\n  margin: 20px;\r\n  font-size: 14px;\r\n  font-weight: bold;\r\n  color: black;\r\n  height: 35px;\r\n}\r\n.projecttitle {\r\n  font-size: 45px;\r\n  margin-left: 10px;\r\n  margin-top: 10px;\r\n  margin-bottom: 20px;\r\n  float:left;\r\n}\r\n.teamtitle {\r\n  margin-top: 30px;\r\n  margin-left: 20px;\r\n  font-family: 黑体;\r\n  font-size: 18px;\r\n  color: #777777;\r\n  float:right;\r\n  white-space: nowrap;\r\n}\r\n.temptablebody{\r\n  height: 500px;\r\n  width: 75%;\r\n  float: left;\r\n}\r\n.messagecss{\r\n  width: 947px;\r\n  margin: 10px;\r\n}\r\n.rightside{\r\n  float: right;\r\n  width: 23%;\r\n  margin: 10px;\r\n  height: 500px;\r\n}\r\n.rightsidefont{\r\n  font-size: 25px;\r\n  margin: 10px;\r\n}\r\n.image{\r\n  width: 100px;\r\n  height: 100px;\r\n}\r\n</style>\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/views/list/table-group-project.vue b/src/views/list/table-group-project.vue
--- a/src/views/list/table-group-project.vue	(revision 263acd8df2e8dda6ef45761577b3d324bfc6ed10)
+++ b/src/views/list/table-group-project.vue	(date 1660044396146)
@@ -141,7 +141,7 @@
               <span>模板{{ index }}</span>
               <div class="bottom clearfix">
                 <time class="time">{{ currentDate }}</time>
-                <el-button type="text" class="button">操作按钮</el-button>
+                <el-button type="text" class="button">预览</el-button>
               </div>
             </div>
           </el-card>
